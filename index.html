<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Crystal Docs 1.9.2">
<meta name="crystal_docs.project_version" content="main">
<meta name="crystal_docs.project_name" content="chatgpt-cli">



<link href="css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="js/doc.js"></script>

  <meta name="repository-name" content="chatgpt-cli">
  <title>chatgpt-cli main</title>
  <script type="text/javascript">
  CrystalDocs.base_path = "";
  </script>
</head>
<body>

<svg class="hidden">
  <symbol id="octicon-link" viewBox="0 0 16 16">
    <path fill="currentColor" fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path>
  </symbol>
</svg>
<input type="checkbox" id="sidebar-btn">
<label for="sidebar-btn" id="sidebar-btn-label">
  <svg class="open" xmlns="http://www.w3.org/2000/svg" height="2em" width="2em" viewBox="0 0 512 512"><title>Open Sidebar</title><path fill="currentColor" d="M80 96v64h352V96H80zm0 112v64h352v-64H80zm0 112v64h352v-64H80z"></path></svg>
  <svg class="close" xmlns="http://www.w3.org/2000/svg" width="2em" height="2em" viewBox="0 0 512 512"><title>Close Sidebar</title><path fill="currentColor" d="m118.6 73.4-45.2 45.2L210.7 256 73.4 393.4l45.2 45.2L256 301.3l137.4 137.3 45.2-45.2L301.3 256l137.3-137.4-45.2-45.2L256 210.7Z"></path></svg>
</label>
<div class="sidebar">
  <div class="sidebar-header">
    <div class="search-box">
      <input type="search" class="search-input" placeholder="Search..." spellcheck="false" aria-label="Search">
    </div>

    <div class="project-summary">
      <h1 class="project-name">
        <a href="index.html">
          chatgpt-cli
        </a>
      </h1>

      <span class="project-version">
        main
      </span>
    </div>
  </div>

  <div class="search-results hidden">
    <ul class="search-list"></ul>
  </div>

  <div class="types-list">
    <ul>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT" data-name="chatgpt">
      <a href="ChatGPT.html">ChatGPT</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/ApiKeyError" data-name="chatgpt::apikeyerror">
      <a href="ChatGPT/ApiKeyError.html">ApiKeyError</a>
      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/CLI" data-name="chatgpt::cli">
      <a href="ChatGPT/CLI.html">CLI</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/CLI/Parser" data-name="chatgpt::cli::parser">
      <a href="ChatGPT/CLI/Parser.html">Parser</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Client" data-name="chatgpt::client">
      <a href="ChatGPT/Client.html">Client</a>
      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Config" data-name="chatgpt::config">
      <a href="ChatGPT/Config.html">Config</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Config/ConfigData" data-name="chatgpt::config::configdata">
      <a href="ChatGPT/Config/ConfigData.html">ConfigData</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Config/NoPromptIdError" data-name="chatgpt::config::nopromptiderror">
      <a href="ChatGPT/Config/NoPromptIdError.html">NoPromptIdError</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Generator" data-name="chatgpt::generator">
      <a href="ChatGPT/Generator.html">Generator</a>
      
        <ul>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Generator/Html" data-name="chatgpt::generator::html">
      <a href="ChatGPT/Generator/Html.html">Html</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Generator/Html/HtmlGenerationError" data-name="chatgpt::generator::html::htmlgenerationerror">
      <a href="ChatGPT/Generator/Html/HtmlGenerationError.html">HtmlGenerationError</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Generator/Html/Message" data-name="chatgpt::generator::html::message">
      <a href="ChatGPT/Generator/Html/Message.html">Message</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Launcher" data-name="chatgpt::launcher">
      <a href="ChatGPT/Launcher.html">Launcher</a>
      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Magic" data-name="chatgpt::magic">
      <a href="ChatGPT/Magic.html">Magic</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Base" data-name="chatgpt::magic::base">
      <a href="ChatGPT/Magic/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Cd" data-name="chatgpt::magic::cd">
      <a href="ChatGPT/Magic/Cd.html">Cd</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Clear" data-name="chatgpt::magic::clear">
      <a href="ChatGPT/Magic/Clear.html">Clear</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Config" data-name="chatgpt::magic::config">
      <a href="ChatGPT/Magic/Config.html">Config</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Debug" data-name="chatgpt::magic::debug">
      <a href="ChatGPT/Magic/Debug.html">Debug</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Edit" data-name="chatgpt::magic::edit">
      <a href="ChatGPT/Magic/Edit.html">Edit</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Help" data-name="chatgpt::magic::help">
      <a href="ChatGPT/Magic/Help.html">Help</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/History" data-name="chatgpt::magic::history">
      <a href="ChatGPT/Magic/History.html">History</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Html" data-name="chatgpt::magic::html">
      <a href="ChatGPT/Magic/Html.html">Html</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/List" data-name="chatgpt::magic::list">
      <a href="ChatGPT/Magic/List.html">List</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Load" data-name="chatgpt::magic::load">
      <a href="ChatGPT/Magic/Load.html">Load</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Model" data-name="chatgpt::magic::model">
      <a href="ChatGPT/Magic/Model.html">Model</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Response" data-name="chatgpt::magic::response">
      <a href="ChatGPT/Magic/Response.html">Response</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Resume" data-name="chatgpt::magic::resume">
      <a href="ChatGPT/Magic/Resume.html">Resume</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Save" data-name="chatgpt::magic::save">
      <a href="ChatGPT/Magic/Save.html">Save</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Shift" data-name="chatgpt::magic::shift">
      <a href="ChatGPT/Magic/Shift.html">Shift</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/System" data-name="chatgpt::magic::system">
      <a href="ChatGPT/Magic/System.html">System</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Tokens" data-name="chatgpt::magic::tokens">
      <a href="ChatGPT/Magic/Tokens.html">Tokens</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Undo" data-name="chatgpt::magic::undo">
      <a href="ChatGPT/Magic/Undo.html">Undo</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Webapp" data-name="chatgpt::magic::webapp">
      <a href="ChatGPT/Magic/Webapp.html">Webapp</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Magic/Write" data-name="chatgpt::magic::write">
      <a href="ChatGPT/Magic/Write.html">Write</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/PostData" data-name="chatgpt::postdata">
      <a href="ChatGPT/PostData.html">PostData</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/ResponseData" data-name="chatgpt::responsedata">
      <a href="ChatGPT/ResponseData.html">ResponseData</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/SigIntError" data-name="chatgpt::siginterror">
      <a href="ChatGPT/SigIntError.html">SigIntError</a>
      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Substitutor" data-name="chatgpt::substitutor">
      <a href="ChatGPT/Substitutor.html">Substitutor</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/Base" data-name="chatgpt::substitutor::base">
      <a href="ChatGPT/Substitutor/Base.html">Base</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/Command" data-name="chatgpt::substitutor::command">
      <a href="ChatGPT/Substitutor/Command.html">Command</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/FilePath" data-name="chatgpt::substitutor::filepath">
      <a href="ChatGPT/Substitutor/FilePath.html">FilePath</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/Stderr" data-name="chatgpt::substitutor::stderr">
      <a href="ChatGPT/Substitutor/Stderr.html">Stderr</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/Stdout" data-name="chatgpt::substitutor::stdout">
      <a href="ChatGPT/Substitutor/Stdout.html">Stdout</a>
      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/Url" data-name="chatgpt::substitutor::url">
      <a href="ChatGPT/Substitutor/Url.html">Url</a>
      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/ChatGPT/Substitutor/WebPageCompressor" data-name="chatgpt::substitutor::webpagecompressor">
      <a href="ChatGPT/Substitutor/WebPageCompressor.html">WebPageCompressor</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/Substitutor/WebPageCompressor/FetchError" data-name="chatgpt::substitutor::webpagecompressor::fetcherror">
      <a href="ChatGPT/Substitutor/WebPageCompressor/FetchError.html">FetchError</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

      
    </li>
  
  <li class=" " data-id="chatgpt-cli/ChatGPT/SystemCommand" data-name="chatgpt::systemcommand">
      <a href="ChatGPT/SystemCommand.html">SystemCommand</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/Colorize" data-name="colorize">
      <a href="Colorize.html">Colorize</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/Colorize/ObjectExtensions" data-name="colorize::objectextensions">
      <a href="Colorize/ObjectExtensions.html">ObjectExtensions</a>
      
    </li>
  
</ul>

      
    </li>
  
  <li class="parent " data-id="chatgpt-cli/HTTP" data-name="http">
      <a href="HTTP.html">HTTP</a>
      
        <ul>
  
  <li class=" " data-id="chatgpt-cli/HTTP/Client" data-name="http::client">
      <a href="HTTP/Client.html">Client</a>
      
    </li>
  
</ul>

      
    </li>
  
</ul>

  </div>
</div>


<div class="main-content">
<h1><a id="chat-gpt-cli" class="anchor" href="#chat-gpt-cli">  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>ChatGPT CLI</h1>
<p><a href="https://github.com/kojix2/chatgpt-cli/actions/workflows/build.yml"><img src="https://github.com/kojix2/chatgpt-cli/actions/workflows/build.yml/badge.svg" alt="build" /></a></p>
<p>:eight_spoked_asterisk: Yet another ChatGPT command line tool.</p>
<h2><a id="features" class="anchor" href="#features">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Features</h2>
<ul>
<li>Interactive command-line interface using <a href="https://tiswww.case.edu/php/chet/readline/rltop.html">GNU Readline</a>.</li>
<li>Expand file contents from the file path(s) using the placeholder.</li>
<li>Expand web page contents from the URL using the placeholder.</li>
<li>Magic commands to <code>clear</code>, <code>pop</code>, <code>edit</code>, <code>write</code>, <code>save</code>, and <code>load</code> data.</li>
<li>Execute system commands and pass captured stdout and stderr output to ChatGPT.</li>
<li>Code blocks in the response can be referenced from <code>$CODE0</code>, <code>$CODE1</code>...</li>
<li>Output HTML.</li>
</ul>
<h2><a id="installation" class="anchor" href="#installation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Installation</h2>
<h3><a id="gti-hub-release" class="anchor" href="#gti-hub-release">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>GtiHub Release</h3>
<p>Download binaries from <a href="https://github.com/kojix2/chatgpt-cli/releases/latest">Github Release</a>.</p>
<h3><a id="from-source-code-recommended" class="anchor" href="#from-source-code-recommended">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>From source code (recommended)</h3>
<p>Install <a href="https://github.com/crystal-lang/crystal">Crystal</a> and build the project:</p>
<pre><code class="language-bash">git clone --recursive https://github.com/kojix2/chatgpt-cli
cd chatgpt-cli
shards build --release
sudo cp bin/chatgpt /usr/local/bin</code></pre>
<p>Please disable Conda or similar environments when building to ensure correct linking.</p>
<details>
<summary><b>Windows</b></summary>
<p>To compile on Windows, set environment variables to turn off the following two features.</p>
<ul>
<li>
<p><code>CHATGPT_NO_READLINE=1</code> disables GNU Readline.</p>
</li>
<li>
<p><code>CHATGPT_NO_URL=1</code> disables URL fetching.</p>
<pre><code class="language-powershell">git clone https://github.com/kojix2/chatgpt-cli
git submodule update -i # Awesome ChatGPT Prompts
cd chatgpt-cli
$env:CHATGPT_NO_READLINE=1
$env:CHATGPT_NO_URL=1
shard build --release --skip-postinstall
# bin/chatgpt.ext is created</code></pre>
</li>
</ul>
</details>
<h3><a id="set-your-open-ai-api-key" class="anchor" href="#set-your-open-ai-api-key">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Set your <a href="https://platform.openai.com/account/api-keys">OpenAI API key</a></h3>
<pre><code class="language-bash">export OPENAI_API_KEY=&quot;your_openai_api_key&quot;</code></pre>
<h3><a id="proxy-settings-optional" class="anchor" href="#proxy-settings-optional">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Proxy settings (optional)</h3>
<pre><code class="language-crystal">export HTTP_PROXY=http://[IP]:[port]
export HTTPS_PROXY=https://[IP]:[port]</code></pre>
<h2><a id="usage" class="anchor" href="#usage">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Usage</h2>
<pre><code class="language-bash">chatgpt</code></pre>
<details>
<summary><b>Windows</b></summary>
<p>Set the environment variable <code>CHATGPT_CLI_CONFIG</code>.</p>
<p>The path to the directory where the configuration file will be saved. This is required on Windows.</p>
</details>
<h3><a id="options" class="anchor" href="#options">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Options</h3>
<pre><code class="language-crystal">Usage: chatgpt [options]
    prompts                          Print all system message IDs and exit
    -r, --resume                     Resume the session
    -l FILE, --load FILE             Load session from file
    -m MODEL, --model MODEL          Model name [gpt-3.5-turbo]
    -i ID, --id ID                   ID of the custom system message
    -s STR, --system STR             System message
    -E INT                           Number of edits to generate [1]
    -T Float, --temperature Float    Sampling temperature to use [1.0]
    -P Float, --top_p Float          Probability threshold of nucleus sampling [1.0]
    -b, --batch                      Batch mode (no interactive prompts)
    -d, --debug                      Debug mode
    -v, --version                    Print version info and exit
    -h, --help                       Print help</code></pre>
<p>Restore the previous chat and use the gpt-4 model.</p>
<pre><code class="language-crystal">chatgpt <span class="o">-</span>r <span class="o">-</span>m gpt<span class="n">-4</span></code></pre>
<h4><a id="interactive-mode" class="anchor" href="#interactive-mode">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Interactive mode</h4>
<p>Start ChatGPT CLI.</p>
<pre><code class="language-crystal">chatgpt i</code></pre>
<p>To exit, type <code>exit</code>, <code>quit</code>, or press <code>Ctrl + D</code>.
Write your message using GNU Readline, which supports <a href="https://en.wikipedia.org/wiki/GNU_Readline">Emacs shortcuts</a>, such as <code>↑</code> and <code>↓</code>.</p>
<pre><code class="language-crystal"><span class="t">Hi</span></code></pre>
<p>You can cancel a query to ChatGPT with <code>Ctrl + C</code>.</p>
<p>Line breaks are not currently supported in the interactive mode.</p>
<h4><a id="batch-mode" class="anchor" href="#batch-mode">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Batch mode</h4>
<ul>
<li><code>-r</code> <code>--resume</code> The chat from the last time you exited is carried over to the startup.</li>
</ul>
<pre><code class="language-sh">echo &quot;hello&quot; | chatgpt
# How can I assist you today?
echo &quot;It's okay now. Rest.&quot; | chatgpt -r
# Thank you for your concern. I hope you have a pleasant day as well. Feel free to reach out if you need any assistance in the future. Take care and rest well!
echo &quot;%html&quot; | chatgpt -r</code></pre>
<h4><a id="awesome-chat-gpt-prompts" class="anchor" href="#awesome-chat-gpt-prompts">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Awesome ChatGPT Prompts</h4>
<p>You can select system commands in <a href="https://github.com/f/awesome-chatgpt-prompts">Awesome ChatGPT Prompts</a>.</p>
<pre><code class="language-bash"># Output list of available prompts
chatgpt prompts
# Set system message by name
chatgpt -i &quot;Linux Terminal&quot;
# by id number
chatgpt -i 0</code></pre>
<h3><a id="magic-commands" class="anchor" href="#magic-commands">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Magic Commands</h3>
<p>During the dialogue, you can use a variety of magic commands. <code>%help</code></p>
<p>| Magic Command       | Description                                                        |
| ------------------- | ------------------------------------------------------------------ |
| <code>%list</code> <code>%list[n]</code>  | Displays the message(s).                                           |
| <code>%clear</code>            | Clear all messages. Change the topic and set token back to zero.   |
| <code>%pop &lt;n&gt;</code>          | Remove the last n messages and response [1].                       |
| <code>%shift &lt;n&gt;</code>        | Remove first n messages and responses [1].                         |
| <code>%write &lt;filename&gt;</code> | Write the most recent message to a file. Save the text or code.    |
| <code>%w &lt;filename&gt;</code>     | Alias for <code>write</code>.                                                 |
| <code>%config</code>           | Edit the config file. Open a text editor and rewrite the settings. |
| <code>%system</code>           | Show the current system message.                                   |
| <code>%system &lt;message&gt;</code> | Set a new system message.                                          |
| <code>%edit</code>             | Edit data in JSON format. You are free to tamper with the past.    |
| <code>%html &lt;filename&gt;</code>  | Export the conversation to HTML and launch your browser.           |
| <code>%save &lt;filename&gt;</code>  | Save the data. This allows you to do things like &quot;save session&quot;.   |
| <code>%load &lt;filename&gt;</code>  | Load the data. This allows you to do things like &quot;load session&quot;.   |
| <code>%resume</code>           | Load data from auto-saved data file.                               |
| <code>%model &lt;name&gt;</code>     | Change the model.                                                  |
| <code>%tokens</code>           | Show number of tokens used from the ChatGPT response.              |
| <code>%webapp</code>           | Open the ChatGPT website.                                          |
| <code>%debug</code>            | Show debug message.                                                |
| <code>%help</code>             | Show the help. Humans forget commands.                             |</p>
<p>Note that for <code>%config</code>, <code>%data</code>, and other commands launch an editor. The editor used can be set by the <code>EDITOR</code> environment variable.</p>
<h3><a id="substitution" class="anchor" href="#substitution">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Substitution</h3>
<h4><a id="files-foo.txt" class="anchor" href="#files-foo.txt">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Files <code>%{foo.txt}</code></h4>
<pre><code class="language-crystal"><span class="t">Please</span> explain the following code: <span class="s">%{src/beatles.py}</span> <span class="t">Are</span> there any bugs?</code></pre>
<pre><code class="language-crystal"><span class="t">Please</span> read the code <span class="k">of</span> the tool: <span class="s">%{src/*.cr}</span> <span class="s">%{src/**/*.cr}</span> <span class="t">Then</span> update <span class="t">README</span>.md <span class="s">%{README.md}</span></code></pre>
<p><code>%{}</code> can be changed in the config file.</p>
<h4><a id="web-pages-uwww.example.com" class="anchor" href="#web-pages-uwww.example.com">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Web pages <code>%u{www.example.com}</code></h4>
<pre><code class="language-crystal"><span class="t">Pick</span> five interesting news items: <span class="o">%</span>u{https<span class="n">://</span>news.ycombinator.com<span class="o">/</span>}</code></pre>
<p>Here, the HTML from the URL is fetched, the words used in the <code>body</code> are extracted and passed to ChatGPT.</p>
<p><code>%u{}</code> can be changed in the config file.</p>
<h3><a id="system-commands" class="anchor" href="#system-commands">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>System Commands</h3>
<h4><a id="cmd" class="anchor" href="#cmd">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>!cmd</code></h4>
<p>Simply execute the system command.</p>
<pre><code class="language-crystal"><span class="o">!</span>pwd</code></pre>
<h4><a id="cmd-1" class="anchor" href="#cmd-1">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>!{ cmd }</code></h4>
<p>Replaced by the contents of the standard output and standard error output.</p>
<pre><code class="language-crystal"><span class="t">Please</span> write a commit message: <span class="o">!</span>{git diff}</code></pre>
<h4><a id="cmd-2" class="anchor" href="#cmd-2">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>!!cmd</code></h4>
<p>capture STDOUT and STDERR.</p>
<pre><code class="language-bash">!!git diff

Please write a commit message: %STDOUT</code></pre>
<pre><code class="language-bash">!!wrong_command

Explain this error message: %STDERR</code></pre>
<h3><a id="code-blocks-in-the-response" class="anchor" href="#code-blocks-in-the-response">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Code Blocks in the Response</h3>
<h4><a id="syntax-highlighting" class="anchor" href="#syntax-highlighting">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Syntax highlighting</h4>
<p>The <a href="https://github.com/sharkdp/bat"><code>bat</code></a> command is required. You can use the development version by setting the following environment variables and compiling.</p>
<ul>
<li><code>CHATGPT_BAT=1 shards build</code> Only code blocks are targeted for syntax highlighting.</li>
<li><code>CHATGPT_BAT=2 shards bulid</code> The entire response is considered markdown and subject to syntax highlighting.</li>
</ul>
<h4><a id="code0-code1" class="anchor" href="#code0-code1">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a><code>$CODE0</code> <code>$CODE1</code></h4>
<p>When ChatGPT returns code blocks, ChatGPT CLI saves these blocks temporarily and assigns them to environment variables named <code>CODE0</code>, <code>CODE1</code>, ... and so on. This allows you to execute the code blocks on your computer.</p>
<pre><code class="language-crystal"><span class="t">Write</span> code to display <span class="n">1</span> to <span class="n">10</span> <span class="k">in</span> <span class="t">Python</span> and <span class="t">Ruby</span>.</code></pre>
<pre><code class="language-md">Python:

```
for i in range(1, 11):
    print(i)
```

Ruby:

```
(1..10).each { |i| puts i }
```</code></pre>
<pre><code class="language-crystal"><span class="o">!</span> python $CODE0
<span class="o">!</span> ruby $CODE1</code></pre>
<p>Save code block.</p>
<pre><code class="language-crystal"><span class="t">Please</span> write comments<span class="o">/</span>documentation <span class="k">for</span> the code: <span class="s">%{src/client.cr}</span>
<span class="o">!</span>cp $CODE0 src<span class="o">/</span>client.cr
<span class="c"># Then check diff with your code editor...</span></code></pre>
<h2><a id="configuration" class="anchor" href="#configuration">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Configuration</h2>
<p><code>config.json</code> is located in <code>~/.config/chatgpt-cli/</code> by default.</p>
<ul>
<li>substitute_patterns: <code>%{}</code> <code>%u{}</code> <code>!{}</code> <code>%STDOUT</code> <code>%STDERR</code></li>
<li>terminal_colors: <code>chatgpt</code> <code>warning</code> <code>debug</code> <code>stdout</code> <code>stderr</code></li>
</ul>
<p>Type <code>%config</code> to launch editor.
Placeholders such as <code>%{}</code> and <code>%u{}</code> can be set with regular expressions</p>
<p>Please refer to the latest <code>config.json</code> file in the repository for the most recent information.</p>
<h3><a id="prompts-system-commands" class="anchor" href="#prompts-system-commands">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Prompts (system commands)</h3>
<p><code>prompts.csv</code> is located in <code>~/.config/chatgpt-cli/</code> by default.</p>
<h2><a id="uninstallation" class="anchor" href="#uninstallation">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Uninstallation</h2>
<p>ChatGPT CLI uses the following 3 files and directories. This is all there is to it.</p>
<pre><code class="language-sh">rm /usr/local/bin/chatgpt   # Remove the executable
rm -r ~/.config/chatgpt-cli # Remove the config directory
rm ~/.chatgpt_history       # Remove command history</code></pre>
<h2><a id="contributing" class="anchor" href="#contributing">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Contributing</h2>
<p>Bug reports and pull requests are welcome on GitHub at <a href="https://github.com/kojix2/chatgpt-cli">https://github.com/kojix2/chatgpt-cli</a>.</p>
<h2><a id="development" class="anchor" href="#development">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Development</h2>
<p><img src="https://raw.githubusercontent.com/kojix2/chatgpt-cli/main/docs/overview.png" alt="overview" /></p>
<p>Building:</p>
<pre><code class="language-bash">git clone https://github.com/kojix2/chatgpt-cli
git submodule update -i
cd chatgpt-cli
shards install
shards build</code></pre>
<p>Testing:</p>
<pre><code class="language-crystal">crystal spec</code></pre>
<p>You can quickly try development by using <a href="https://www.gitpod.io/">Gitpod</a>.</p>
<h2><a id="acknowledgments" class="anchor" href="#acknowledgments">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>Acknowledgments</h2>
<ul>
<li>@hidao80 - <a href="https://github.com/hidao80/MonopolyGPT">MonopolyGPT</a></li>
</ul>
<h2><a id="license" class="anchor" href="#license">
  <svg class="octicon-link" aria-hidden="true">
    <use href="#octicon-link"/>
  </svg>
</a>License</h2>
<p>This project is open source and available under the terms of the <a href="https://opensource.org/licenses/MIT">MIT License</a>.</p>
</div>
</body>
</html>
