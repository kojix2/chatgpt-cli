{"repository_name":"chatgpt-cli","body":"# ChatGPT CLI\n\n[![build](https://github.com/kojix2/chatgpt-cli/actions/workflows/build.yml/badge.svg)](https://github.com/kojix2/chatgpt-cli/actions/workflows/build.yml)\n\n:eight_spoked_asterisk: Yet another ChatGPT command line tool.\n\n## Features\n\n- Interactive command-line interface using [GNU Readline](https://tiswww.case.edu/php/chet/readline/rltop.html).\n- Expand file contents from the file path(s) using the placeholder.\n- Expand web page contents from the URL using the placeholder.\n- Magic commands to `clear`, `undo`, `edit`, `write`, `save`, and `load` data.\n- Execute system commands and pass captured stdout and stderr output to ChatGPT.\n- Code blocks in the response can be referenced from `$CODE1`, `$CODE2`...\n- Output HTML.\n\n## Installation\n\n### GtiHub Release\n\nDownload binaries from [Github Release](https://github.com/kojix2/chatgpt-cli/releases/latest).\n\n### From source code\n\nInstall [Crystal](https://github.com/crystal-lang/crystal) and build the project:\n\n```bash\ngit clone https://github.com/kojix2/chatgpt-cli\ngit submodule update -i # Awesome ChatGPT Prompts\ncd chatgpt-cli\nmake\nsudo make install # Or simply copy bin/chatgpt to your directory in $PATH.\n```\n\n<details>\n<summary><b>Windows</b></summary>\n\nTo compile on Windows, set environment variables to turn off the following two features.\n\n- `CHATGPT_NO_READLINE=1` disables GNU Readline.\n- `CHATGPT_NO_URL=1` disables URL fetching.\n\n  ```powershell\n  git clone https://github.com/kojix2/chatgpt-cli\n  git submodule update -i # Awesome ChatGPT Prompts\n  cd chatgpt-cli\n  $env:CHATGPT_NO_READLINE=1\n  $env:CHATGPT_NO_URL=1\n  shard build --release --skip-postinstall\n  # bin/chatgpt.ext is created\n  ```\n\n</details>\n\n### Set your [OpenAI API key](https://platform.openai.com/account/api-keys)\n\n```bash\nexport OPENAI_API_KEY=\"your_openai_api_key\"\n```\n\n### Proxy settings\n\n```\nexport HTTP_PROXY=http://[IP]:[port]\nexport HTTPS_PROXY=https://[IP]:[port]\n```\n\n## Usage\n\n```bash\nchatgpt\n```\n\n<details>\n<summary><b>Windows</b></summary>\n\nSet the environment variable `CHATGPT_CLI_CONFIG`.\n\nThe path to the directory where the configuration file will be saved. This is required on Windows.\n\n</details>\n\n### Options\n\n```\nUsage: chatgpt [options]\n    prompts                          Print all system message IDs and exit\n    -r, --resume                     Resume the session\n    -l FILE, --load FILE             Load session from file\n    -m MODEL, --model MODEL          Model name [gpt-3.5-turbo]\n    -i ID, --id ID                   ID of the custom system message\n    -s STR, --system STR             System message\n    -E INT                           Number of edits to generate [1]\n    -T Float, --temperature Float    Sampling temperature to use [1.0]\n    -P Float, --top_p Float          Probability threshold of nucleus sampling [1.0]\n    -b, --batch                      Batch mode (no interactive prompts)\n    -d, --debug                      Debug mode\n    -v, --version                    Print version info and exit\n    -h, --help                       Print help\n```\n\nRestore the previous chat and use the gpt-4 model.\n\n```\nchatgpt -r -m gpt-4\n```\n\n#### Interactive mode (default)\n\nStart ChatGPT CLI.\n\n```\nchatgpt\n```\n\nTo exit, type `exit`, `quit`, or press `Ctrl + D`.\nWrite your message using GNU Readline, which supports [Emacs shortcuts](https://en.wikipedia.org/wiki/GNU_Readline), such as `↑` and `↓`.\n\n```\nHi\n```\n\nYou can cancel a query to ChatGPT with `Ctrl + C`.\n\nLine breaks are not currently supported in the interactive mode.\n\n#### Batch mode\n\n- `-b` `--batch` Pass input by filename or standard input. ChatGPT will output to standard output and exit immediately.\n- `-r` `--resume` The chat from the last time you exited is carried over to the startup.\n\n```sh\necho \"hello\" | chatgpt -b\n# How can I assist you today?\necho \"It's okay now. Rest.\" | chatgpt -b -r\n# Thank you for your concern. I hope you have a pleasant day as well. Feel free to reach out if you need any assistance in the future. Take care and rest well!\necho \"%html\" | chatgpt -b -r\n```\n\n#### Awesome ChatGPT Prompts\n\nYou can select system commands in [Awesome ChatGPT Prompts](https://github.com/f/awesome-chatgpt-prompts).\n\n```bash\nchatgpt -i \"Linux Terminal\"\n```\n\n### Magic Commands\n\nDuring the dialogue, you can use a variety of magic commands.\n\n| Magic Command       | Description                                                        |\n| ------------------- | ------------------------------------------------------------------ |\n| `%clear`            | Clear all messages. Change the topic and set token back to zero.   |\n| `%undo <n>`         | Undo the last n query and response [1].                            |\n| `%shift <n>`        | Remove first <n> messages and responses.                           |\n| `%write <filename>` | Write the most recent message to a file. Save the text or code.    |\n| `%w <filename>`     | Alias for `write`.                                                 |\n| `%config`           | Edit the config file. Open a text editor and rewrite the settings. |\n| `%system`           | Show the current system message.                                   |\n| `%system <message>` | Set a new system message.                                          |\n| `%edit`             | Edit data in JSON format. You are free to tamper with the past.    |\n| `%html <filename>`  | Export the conversation to HTML and launch your browser.           |\n| `%save <filename>`  | Save the data. This allows you to do things like \"save session\".   |\n| `%load <filename>`  | Load the data. This allows you to do things like \"load session\".   |\n| `%resume`           | Load data from auto-saved data file.                               |\n| `%model <name>`     | Change the model.                                                  |\n| `%tokens`           | Show number of tokens used from the ChatGPT response.              |\n| `%webapp`           | Open the ChatGPT website.                                          |\n| `%debug`            | Show debug message.                                                |\n| `%help`             | Show the help. Humans forget commands.                             |\n\nNote that for `%config`, `%data`, and other commands launch an editor. The editor used can be set by the `EDITOR` environment variable.\n\n### Substitution\n\n#### Files `%{foo.txt}`\n\n```\nPlease explain the following code: %{src/beatles.py} Are there any bugs?\n```\n\n```\nPlease read the code of the tool: %{src/*.cr} %{src/**/*.cr} Then update README.md %{README.md}\n```\n\n`%{}` can be changed in the config file.\n\n#### Web pages `%%{www.example.com}`\n\n```\nPick five interesting news items: %%{https://news.ycombinator.com/}\n```\n\nHere, the HTML from the URL is fetched, the words used in the `body` are extracted and passed to ChatGPT.\n\n`%%{}` can be changed in the config file.\n\n### Executing System Commands `!pwd`\n\n```\n!pwd\n```\n\n```\n!vim\n```\n\n```\n!top\n```\n\n#### Capture STDOUT and STDERR `!!cmd` `%STDOUT` `%STDERR` `!{cmd}`\n\n```bash\n!!git diff\n```\n\n```\nPlease write a commit message: %STDOUT\n```\n\n```bash\n!!wrong_command\n```\n\n```\nExplain the meaning of this error message: %STDERR\n```\n\nYou can also use `!{ cmd }`. In this case, it will be replaced by the contents of standard input\n\n```\nWhat time is it now? Hint: !{date}\n```\n\n#### Code Blocks in the Response `$CODE1` `$CODE2`\n\nWhen ChatGPT returns code blocks, ChatGPT CLI saves these blocks temporarily and assigns them to environment variables named `CODE1`, `CODE2`, ... and so on. This allows you to execute the code blocks on your computer.\n\n```\nWrite code to display 1 to 10 in Python and Ruby.\n```\n\n````md\nPython:\n\n```\nfor i in range(1, 11):\n    print(i)\n```\n\nRuby:\n\n```\n(1..10).each { |i| puts i }\n```\n````\n\n```\n! python $CODE1\n! ruby $CODE2\n```\n\nSave code block.\n\n```\nPlease write comments/documentation for the code: %{src/client.cr}\n!cp $CODE1 src/client.cr\n# Then check diff with your code editor...\n```\n\n## Configuration\n\n`config.json` is located in `~/.config/chatgpt-cli/` by default.\n\n- substitute_patterns: `%{}` `%%{}` `!{}` `%STDOUT` `%STDERR`\n- terminal_colors: `chatgpt` `warning` `debug` `stdout` `stderr`\n\nType `%config` to launch editor.\nPlaceholders such as `%{}` and `%%{}` can be set with regular expressions\n\nPlease refer to the latest `config.json` file in the repository for the most recent information.\n\n### Prompts (system commands)\n\n`prompts.csv` is located in `~/.config/chatgpt-cli/` by default.\n\n## Uninstallation\n\nChatGPT CLI uses the following 3 files and directories. This is all there is to it.\n\n```sh\nrm /usr/local/bin/chatgpt   # Remove the executable\nrm -r ~/.config/chatgpt-cli # Remove the config directory\nrm ~/.chatgpt_history       # Remove command history\n```\n\nOr\n\n```\nsudo make uninstall\n```\n\n## Contributing\n\nBug reports and pull requests are welcome on GitHub at [https://github.com/kojix2/chatgpt-cli](https://github.com/kojix2/chatgpt-cli).\n\n## Development\n\n![overview](https://raw.githubusercontent.com/kojix2/chatgpt-cli/main/docs/overview.png)\n\nBuilding:\n\n```bash\ngit clone https://github.com/kojix2/chatgpt-cli\ngit submodule update -i\ncd chatgpt-cli\nshards install\nshards build\n```\n\nTesting:\n\n```\ncrystal spec\n```\n\nYou can quickly try development by using [Gitpod](https://www.gitpod.io/).\n\n## Acknowledgments\n\n- @hidao80 - [MonopolyGPT](https://github.com/hidao80/MonopolyGPT)\n\n## License\n\nThis project is open source and available under the terms of the [MIT License](https://opensource.org/licenses/MIT).\n","program":{"html_id":"chatgpt-cli/toplevel","path":"toplevel.html","kind":"module","full_name":"Top Level Namespace","name":"Top Level Namespace","abstract":false,"locations":[],"repository_name":"chatgpt-cli","program":true,"enum":false,"alias":false,"const":false,"types":[{"html_id":"chatgpt-cli/ChatGPT","path":"ChatGPT.html","kind":"module","full_name":"ChatGPT","name":"ChatGPT","abstract":false,"locations":[{"filename":"src/chatgpt.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt.cr#L3"},{"filename":"src/chatgpt/cli.cr","line_number":19,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L19"},{"filename":"src/chatgpt/cli/parser.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L5"},{"filename":"src/chatgpt/cli/version.cr","line_number":1,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/version.cr#L1"},{"filename":"src/chatgpt/client.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L3"},{"filename":"src/chatgpt/config.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L7"},{"filename":"src/chatgpt/generator/html.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/html.cr#L4"},{"filename":"src/chatgpt/generator/message.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L3"},{"filename":"src/chatgpt/magic.cr","line_number":25,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L25"},{"filename":"src/chatgpt/magic/base.cr","line_number":1,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L1"},{"filename":"src/chatgpt/magic/cd.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L3"},{"filename":"src/chatgpt/magic/clear.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/clear.cr#L3"},{"filename":"src/chatgpt/magic/config.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/config.cr#L3"},{"filename":"src/chatgpt/magic/debug.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/debug.cr#L3"},{"filename":"src/chatgpt/magic/edit.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/edit.cr#L3"},{"filename":"src/chatgpt/magic/help.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/help.cr#L3"},{"filename":"src/chatgpt/magic/history.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/history.cr#L3"},{"filename":"src/chatgpt/magic/html.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L3"},{"filename":"src/chatgpt/magic/load.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L3"},{"filename":"src/chatgpt/magic/model.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L3"},{"filename":"src/chatgpt/magic/response.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/response.cr#L3"},{"filename":"src/chatgpt/magic/resume.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/resume.cr#L3"},{"filename":"src/chatgpt/magic/save.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L3"},{"filename":"src/chatgpt/magic/shift.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L3"},{"filename":"src/chatgpt/magic/system.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L3"},{"filename":"src/chatgpt/magic/tokens.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/tokens.cr#L3"},{"filename":"src/chatgpt/magic/undo.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L3"},{"filename":"src/chatgpt/magic/webapp.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/webapp.cr#L3"},{"filename":"src/chatgpt/magic/write.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/write.cr#L3"},{"filename":"src/chatgpt/post_data.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L3"},{"filename":"src/chatgpt/response_data.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L3"},{"filename":"src/chatgpt/substitutor.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor.cr#L11"},{"filename":"src/chatgpt/substitutor/base.cr","line_number":1,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/base.cr#L1"},{"filename":"src/chatgpt/substitutor/command.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/command.cr#L3"},{"filename":"src/chatgpt/substitutor/file.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file.cr#L4"},{"filename":"src/chatgpt/substitutor/file_extensions.cr","line_number":1,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file_extensions.cr#L1"},{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L3"},{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L3"},{"filename":"src/chatgpt/substitutor/url.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/url.cr#L4"},{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L10"},{"filename":"src/chatgpt/system_command.cr","line_number":1,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L1"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"DEBUG_FLAG","name":"DEBUG_FLAG","value":"[false]"}],"types":[{"html_id":"chatgpt-cli/ChatGPT/ApiKeyError","path":"ChatGPT/ApiKeyError.html","kind":"class","full_name":"ChatGPT::ApiKeyError","name":"ApiKeyError","abstract":false,"superclass":{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/client.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"doc":"Define custom exceptions for API key errors and SIGINT signals","summary":"<p>Define custom exceptions for API key errors and SIGINT signals</p>"},{"html_id":"chatgpt-cli/ChatGPT/CLI","path":"ChatGPT/CLI.html","kind":"class","full_name":"ChatGPT::CLI","name":"CLI","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/cli.cr","line_number":20,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L20"},{"filename":"src/chatgpt/cli/parser.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L6"},{"filename":"src/chatgpt/cli/version.cr","line_number":2,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/version.cr#L2"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"SOURCE_URL","name":"SOURCE_URL","value":"\"https://github.com/kojix2/chatgpt-cli\""},{"id":"VERSION","name":"VERSION","value":"{{ (`shards version /home/runner/work/chatgpt-cli/chatgpt-cli/src/chatgpt/cli`).chomp.stringify }}"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":32,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L32"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"chat_gpt_client:ChatGPT::Client-instance-method","name":"chat_gpt_client","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":22,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L22"},"def":{"name":"chat_gpt_client","visibility":"Public","body":"@chat_gpt_client"}},{"html_id":"code_blocks:Array(File)-instance-method","name":"code_blocks","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":30,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L30"},"def":{"name":"code_blocks","return_type":"Array(File)","visibility":"Public","body":"@code_blocks"}},{"html_id":"interactive:Bool-instance-method","name":"interactive","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":23,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L23"},"def":{"name":"interactive","return_type":"Bool","visibility":"Public","body":"@interactive"}},{"html_id":"magic_command_runner:ChatGPT::Magic-instance-method","name":"magic_command_runner","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":25,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L25"},"def":{"name":"magic_command_runner","visibility":"Public","body":"@magic_command_runner"}},{"html_id":"main_run(input_msg)-instance-method","name":"main_run","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""}],"args_string":"(input_msg)","args_html":"(input_msg)","location":{"filename":"src/chatgpt/cli.cr","line_number":106,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L106"},"def":{"name":"main_run","args":[{"name":"input_msg","external_name":"input_msg","restriction":""}],"visibility":"Public","body":"if system_command(input_msg)\n  return true\nend\nif magic_command(input_msg)\n  return true\nend\ninput_msg = substitute(input_msg)\npost_data.add_message(\"user\", input_msg)\nbegin\n  response = chat_gpt_client.send_chat_request(post_data)\nrescue ex\n  STDERR.puts(\"Error: #{ex.message}\"._colorize(:warning, :bold))\n  post_data.messages.pop\n  return false\nend\nif response.success?\nelse\n  display_errors(response)\n  post_data.messages.pop\n  return false\nend\n@response_data = ResponseData.new(response.body)\nresult_msg = response_data.assistant_message\npost_data.add_message(\"assistant\", result_msg)\nFile.write(Config::POST_DATA_FILE, post_data.to_pretty_json)\nset_envs_from_response(result_msg)\n@total_tokens = response_data.total_tokens\nputs(result_msg._colorize(:chatgpt))\nreturn true\n"}},{"html_id":"post_data:PostData-instance-method","name":"post_data","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L21"},"def":{"name":"post_data","return_type":"PostData","visibility":"Public","body":"@post_data"}},{"html_id":"response_data:ResponseData-instance-method","name":"response_data","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":28,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L28"},"def":{"name":"response_data","return_type":"ResponseData","visibility":"Public","body":"@response_data"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":57,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L57"},"def":{"name":"run","visibility":"Public","body":"if @interactive\n  run_interacitively\nelse\n  run_in_batch\nend"}},{"html_id":"run_in_batch-instance-method","name":"run_in_batch","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":65,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L65"},"def":{"name":"run_in_batch","visibility":"Public","body":"input_msg = ARGF.gets_to_end\nadd_history(input_msg)\nmain_run(input_msg)\n"}},{"html_id":"run_interacitively-instance-method","name":"run_interacitively","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":71,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L71"},"def":{"name":"run_interacitively","visibility":"Public","body":"{% if env(\"CHATGPT_NO_READLINE\") %}{% else %}\n        LibReadline.read_history(Config::HISTORY_FILE)\n      {% end %}\ninput_msg = nil\nloop do\n  {% if env(\"CHATGPT_NO_READLINE\") %}\n          print(readline_prompt)\n          input_msg = gets\n          if input_msg.nil?\n            # ctrl + d\n            puts # Output linebreak\n            break\n          else\n            input_msg = input_msg.chomp\n          end\n        {% else %}\n          input_msg = Readline.readline(readline_prompt, true)\n          # ctrl + d\n          break if input_msg.nil?\n        {% end %}\n  if input_msg.empty?\n    next\n  end\n  add_history(input_msg)\n  if [\"exit\", \"quit\"].includes?(input_msg)\n    break\n  end\n  main_run(input_msg)\nend\n"}},{"html_id":"substitutor:ChatGPT::Substitutor-instance-method","name":"substitutor","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":26,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L26"},"def":{"name":"substitutor","visibility":"Public","body":"@substitutor"}},{"html_id":"system_command_runner:ChatGPT::SystemCommand-instance-method","name":"system_command_runner","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":24,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L24"},"def":{"name":"system_command_runner","visibility":"Public","body":"@system_command_runner"}},{"html_id":"total_tokens:Int32-instance-method","name":"total_tokens","abstract":false,"location":{"filename":"src/chatgpt/cli.cr","line_number":29,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli.cr#L29"},"def":{"name":"total_tokens","return_type":"Int32","visibility":"Public","body":"@total_tokens"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/CLI/Parser","path":"ChatGPT/CLI/Parser.html","kind":"class","full_name":"ChatGPT::CLI::Parser","name":"Parser","abstract":false,"superclass":{"html_id":"chatgpt-cli/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},"ancestors":[{"html_id":"chatgpt-cli/OptionParser","kind":"class","full_name":"OptionParser","name":"OptionParser"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/cli/parser.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L7"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/CLI","kind":"class","full_name":"ChatGPT::CLI","name":"CLI"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/chatgpt/cli/parser.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L11"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"data:PostData-instance-method","name":"data","abstract":false,"location":{"filename":"src/chatgpt/cli/parser.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L8"},"def":{"name":"data","return_type":"PostData","visibility":"Public","body":"@data"}},{"html_id":"interactive:Bool-instance-method","name":"interactive","abstract":false,"location":{"filename":"src/chatgpt/cli/parser.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L9"},"def":{"name":"interactive","return_type":"Bool","visibility":"Public","body":"@interactive"}},{"html_id":"load_session(filename)-instance-method","name":"load_session","abstract":false,"args":[{"name":"filename","external_name":"filename","restriction":""}],"args_string":"(filename)","args_html":"(filename)","location":{"filename":"src/chatgpt/cli/parser.cr","line_number":78,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/cli/parser.cr#L78"},"def":{"name":"load_session","args":[{"name":"filename","external_name":"filename","restriction":""}],"visibility":"Public","body":"begin\n  @data = PostData.from_json(File.read(filename))\nrescue\n  STDERR.puts(\"Error: Loading session failed (#{filename})\")\nend"}}]}]},{"html_id":"chatgpt-cli/ChatGPT/Client","path":"ChatGPT/Client.html","kind":"class","full_name":"ChatGPT::Client","name":"Client","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/client.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L10"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"API_ENDPOINT","name":"API_ENDPOINT","value":"\"https://api.openai.com\"","doc":"Set the API endpoint URL","summary":"<p>Set the API endpoint URL</p>"},{"id":"WEB_APP_URL","name":"WEB_APP_URL","value":"\"https://chat.openai.com\"","doc":"ChatGPT Web App URL","summary":"<p>ChatGPT Web App URL</p>"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"doc":"Define the Client class that handles communication with the ChatGPT API","summary":"<p>Define the Client class that handles communication with the ChatGPT API</p>","constructors":[{"html_id":"new-class-method","name":"new","doc":"Initialize the Client object by building the required HTTP headers","summary":"<p>Initialize the Client object by building the required HTTP headers</p>","abstract":false,"location":{"filename":"src/chatgpt/client.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L21"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"build_http_headers-instance-method","name":"build_http_headers","doc":"Build the required HTTP headers using the API key from environment variables","summary":"<p>Build the required HTTP headers using the API key from environment variables</p>","abstract":false,"location":{"filename":"src/chatgpt/client.cr","line_number":26,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L26"},"def":{"name":"build_http_headers","visibility":"Public","body":"HTTP::Headers {\"Authorization\" => \"Bearer #{fetch_api_key}\", \"Content-Type\" => \"application/json\"}"}},{"html_id":"fetch_api_key-instance-method","name":"fetch_api_key","doc":"Fetch the API key from the environment variables or display an error if not present","summary":"<p>Fetch the API key from the environment variables or display an error if not present</p>","abstract":false,"location":{"filename":"src/chatgpt/client.cr","line_number":34,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L34"},"def":{"name":"fetch_api_key","visibility":"Public","body":"if ENV.has_key?(\"OPENAI_API_KEY\")\n  ENV[\"OPENAI_API_KEY\"]\nelse\n  STDERR.puts(\"Error: OPENAI_API_KEY is not set. \"._colorize(:warning, :bold))\n  STDERR.puts(\"Please get your API key and set it as an environment variable.\"._colorize(:warning))\n  \"\"\nend"}},{"html_id":"post_request(request_data)-instance-method","name":"post_request","doc":"Send a POST request with the provided request data to the ChatGPT API","summary":"<p>Send a POST request with the provided request data to the ChatGPT API</p>","abstract":false,"args":[{"name":"request_data","external_name":"request_data","restriction":""}],"args_string":"(request_data)","args_html":"(request_data)","location":{"filename":"src/chatgpt/client.cr","line_number":61,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L61"},"def":{"name":"post_request","args":[{"name":"request_data","external_name":"request_data","restriction":""}],"visibility":"Public","body":"begin\n  client = HTTP::Client.new(URI.parse(API_ENDPOINT))\n  {% if (  (flag?(:linux)) || (flag?(:darwin))) %}\n        Signal::INT.trap { |s| client.close }\n      {% end %}\n  response = client.post(\"/v1/chat/completions\", headers: @http_headers, body: request_data.to_json)\nrescue ex\n  {% if (  (flag?(:linux)) || (flag?(:darwin))) %}\n        Signal::INT.reset\n      {% end %}\n  raise(ex)\nend"}},{"html_id":"send_chat_request(request_data)-instance-method","name":"send_chat_request","doc":"Send a chat request to the ChatGPT API and log the request and response data if in debug mode","summary":"<p>Send a chat request to the ChatGPT API and log the request and response data if in debug mode</p>","abstract":false,"args":[{"name":"request_data","external_name":"request_data","restriction":""}],"args_string":"(request_data)","args_html":"(request_data)","location":{"filename":"src/chatgpt/client.cr","line_number":45,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L45"},"def":{"name":"send_chat_request","args":[{"name":"request_data","external_name":"request_data","restriction":""}],"visibility":"Public","body":"if debug_mode?\n  log_request_data(request_data)\nend\nspinner = create_spinner\nspinner.start\nbegin\n  chat_response = post_request(request_data)\nrescue ex\n  spinner.stop\n  raise(ex)\nend\nspinner.stop\nif debug_mode?\n  log_response_data(chat_response)\nend\nchat_response\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Config","path":"ChatGPT/Config.html","kind":"class","full_name":"ChatGPT::Config","name":"Config","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/config.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L8"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"BASE_DIR","name":"BASE_DIR","value":"if ENV.has_key?(\"CHATGPT_CLI_CONFIG\")\n  ENV[\"CHATGPT_CLI_CONFIG\"]\nelse\n  if ENV.has_key?(\"HOME\")\n    \"#{ENV[\"HOME\"]}/.config/chatgpt-cli\"\n  else\n    raise(\"Please set CHATGPT_CLI_CONFIG environment variable.\")\n  end\nend"},{"id":"CONFIG_FILE","name":"CONFIG_FILE","value":"\"#{BASE_DIR}/config.json\""},{"id":"DEFAULT_CONFIG","name":"DEFAULT_CONFIG","value":"{{ read_file(\"/home/runner/work/chatgpt-cli/chatgpt-cli/src/chatgpt/../../config.json\") }}"},{"id":"DEFAULT_PROMPTS","name":"DEFAULT_PROMPTS","value":"{{ read_file(\"/home/runner/work/chatgpt-cli/chatgpt-cli/src/chatgpt/../../awesome-chatgpt-prompts/prompts.csv\") }}"},{"id":"HISTORY_FILE","name":"HISTORY_FILE","value":"if ENV.has_key?(\"HOME\")\n  \"#{ENV[\"HOME\"]}/.chatgpt_history\"\nelse\n  \"#{BASE_DIR}/chatgpt_history\"\nend"},{"id":"POST_DATA_FILE","name":"POST_DATA_FILE","value":"\"#{BASE_DIR}/post_data.json\""},{"id":"PROMPTS_FILE","name":"PROMPTS_FILE","value":"\"#{BASE_DIR}/prompts.csv\""}],"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"class_methods":[{"html_id":"instance-class-method","name":"instance","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":37,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L37"},"def":{"name":"instance","visibility":"Public","body":"@@instance || (@@instance = new)"}}],"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":41,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L41"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"color(id:Symbol)-instance-method","name":"color","abstract":false,"args":[{"name":"id","external_name":"id","restriction":"Symbol"}],"args_string":"(id : Symbol)","args_html":"(id : Symbol)","location":{"filename":"src/chatgpt/config.cr","line_number":120,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L120"},"def":{"name":"color","args":[{"name":"id","external_name":"id","restriction":"Symbol"}],"visibility":"Public","body":"default = @config_data_default[\"terminal_colors\"][id.to_s]\nterminal_colors.fetch(id.to_s, default)\n"}},{"html_id":"command_regex-instance-method","name":"command_regex","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":143,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L143"},"def":{"name":"command_regex","visibility":"Public","body":"Regex.new((pattern(:command))[\"pattern\"])"}},{"html_id":"config_data:ConfigData-instance-method","name":"config_data","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":34,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L34"},"def":{"name":"config_data","return_type":"ConfigData","visibility":"Public","body":"@config_data"}},{"html_id":"file_regex-instance-method","name":"file_regex","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":151,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L151"},"def":{"name":"file_regex","visibility":"Public","body":"Regex.new((pattern(:file))[\"pattern\"])"}},{"html_id":"load_config-instance-method","name":"load_config","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":50,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L50"},"def":{"name":"load_config","visibility":"Public","body":"if File.exists?(CONFIG_FILE)\nelse\n  create_default_config\nend\nbegin\n  File.open(CONFIG_FILE) do |f|\n    @config_data = ConfigData.from_json(f)\n  end\nrescue ex\n  log_load_error(ex, CONFIG_FILE)\nend\n"}},{"html_id":"load_prompts-instance-method","name":"load_prompts","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":61,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L61"},"def":{"name":"load_prompts","visibility":"Public","body":"if File.exists?(PROMPTS_FILE)\nelse\n  create_default_prompts\nend\nbegin\n  File.open(PROMPTS_FILE) do |f|\n    CSV.each_row(f) do |row|\n      if row == [\"act\", \"prompt\"]\n        next\n      end\n      @prompts[row[0]] = row[1]\n    end\n  end\nrescue ex\n  log_load_error(ex, PROMPTS_FILE)\nend\n"}},{"html_id":"pattern(id:Symbol)-instance-method","name":"pattern","abstract":false,"args":[{"name":"id","external_name":"id","restriction":"Symbol"}],"args_string":"(id : Symbol)","args_html":"(id : Symbol)","location":{"filename":"src/chatgpt/config.cr","line_number":130,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L130"},"def":{"name":"pattern","args":[{"name":"id","external_name":"id","restriction":"Symbol"}],"visibility":"Public","body":"default = @config_data_default[\"substitute_patterns\"][id.to_s]\nsubstitute_patterns.fetch(id.to_s, default)\n"}},{"html_id":"prompts:Hash(String,String)-instance-method","name":"prompts","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":35,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L35"},"def":{"name":"prompts","return_type":"Hash(String, String)","visibility":"Public","body":"@prompts"}},{"html_id":"select_id(id)-instance-method","name":"select_id","abstract":false,"args":[{"name":"id","external_name":"id","restriction":""}],"args_string":"(id)","args_html":"(id)","location":{"filename":"src/chatgpt/config.cr","line_number":102,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L102"},"def":{"name":"select_id","args":[{"name":"id","external_name":"id","restriction":""}],"visibility":"Public","body":"if @prompts.has_key?(id)\n  prompt = @prompts[id]\nelse\n  if id =~ (/^[0-9]+$/)\n    prompt = @prompts.values[id.to_i]\n    key = @prompts.keys[id.to_i]\n    STDERR.puts(key._colorize(:warning))\n  else\n    raise(NoPromptIdError.new(\"No such prompt id: \\\"#{id}\\\"\"))\n  end\nend\n{\"role\" => \"system\", \"content\" => prompt}\n"}},{"html_id":"stderr_regex-instance-method","name":"stderr_regex","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":139,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L139"},"def":{"name":"stderr_regex","visibility":"Public","body":"Regex.new((pattern(:stderr))[\"pattern\"])"}},{"html_id":"stdout_regex-instance-method","name":"stdout_regex","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":135,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L135"},"def":{"name":"stdout_regex","visibility":"Public","body":"Regex.new((pattern(:stdout))[\"pattern\"])"}},{"html_id":"substitute_patterns-instance-method","name":"substitute_patterns","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":125,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L125"},"def":{"name":"substitute_patterns","visibility":"Public","body":"default = @config_data_default[\"substitute_patterns\"]\n@config_data.fetch(\"substitute_patterns\", default)\n"}},{"html_id":"terminal_colors-instance-method","name":"terminal_colors","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":115,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L115"},"def":{"name":"terminal_colors","visibility":"Public","body":"default = @config_data_default[\"terminal_colors\"]\n@config_data.fetch(\"terminal_colors\", default)\n"}},{"html_id":"url_regex-instance-method","name":"url_regex","abstract":false,"location":{"filename":"src/chatgpt/config.cr","line_number":147,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L147"},"def":{"name":"url_regex","visibility":"Public","body":"Regex.new((pattern(:url))[\"pattern\"])"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/Config/ConfigData","path":"ChatGPT/Config/ConfigData.html","kind":"alias","full_name":"ChatGPT::Config::ConfigData","name":"ConfigData","abstract":false,"locations":[{"filename":"src/chatgpt/config.cr","line_number":30,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L30"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":true,"aliased":"Hash(String, Hash(String, Hash(String, String)))","aliased_html":"Hash(String, Hash(String, Hash(String, String)))","const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Config","kind":"class","full_name":"ChatGPT::Config","name":"Config"}},{"html_id":"chatgpt-cli/ChatGPT/Config/NoPromptIdError","path":"ChatGPT/Config/NoPromptIdError.html","kind":"class","full_name":"ChatGPT::Config::NoPromptIdError","name":"NoPromptIdError","abstract":false,"superclass":{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/config.cr","line_number":32,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/config.cr#L32"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Config","kind":"class","full_name":"ChatGPT::Config","name":"Config"}}]},{"html_id":"chatgpt-cli/ChatGPT/Generator","path":"ChatGPT/Generator.html","kind":"module","full_name":"ChatGPT::Generator","name":"Generator","abstract":false,"locations":[{"filename":"src/chatgpt/generator/message.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L4"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"types":[{"html_id":"chatgpt-cli/ChatGPT/Generator/Html","path":"ChatGPT/Generator/Html.html","kind":"class","full_name":"ChatGPT::Generator::Html","name":"Html","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/generator/html.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/html.cr#L5"},{"filename":"src/chatgpt/generator/message.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L4"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Generator","kind":"module","full_name":"ChatGPT::Generator","name":"Generator"},"constructors":[{"html_id":"new(data)-class-method","name":"new","abstract":false,"args":[{"name":"data","external_name":"data","restriction":""}],"args_string":"(data)","args_html":"(data)","location":{"filename":"src/chatgpt/generator/html.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/html.cr#L8"},"def":{"name":"new","args":[{"name":"data","external_name":"data","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(data)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"to_s(__io__:IO):Nil-instance-method","name":"to_s","doc":"Appends a short String representation of this object\nwhich includes its class name and its object address.\n\n```\nclass Person\n  def initialize(@name : String, @age : Int32)\n  end\nend\n\nPerson.new(\"John\", 32).to_s # => #<Person:0x10a199f20>\n```","summary":"<p>Appends a short String representation of this object which includes its class name and its object address.</p>","abstract":false,"args":[{"name":"__io__","external_name":"__io__","restriction":"IO"}],"args_string":"(__io__ : IO) : Nil","args_html":"(__io__ : IO) : Nil","location":{"filename":"src/chatgpt/generator/html.cr","line_number":14,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/html.cr#L14"},"def":{"name":"to_s","args":[{"name":"__io__","external_name":"__io__","restriction":"IO"}],"return_type":"Nil","visibility":"Public","body":"ECR.embed(\"/home/runner/work/chatgpt-cli/chatgpt-cli/src/chatgpt/generator/template.html.ecr\", \"__io__\")"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/Generator/Html/HtmlGenerationError","path":"ChatGPT/Generator/Html/HtmlGenerationError.html","kind":"class","full_name":"ChatGPT::Generator::Html::HtmlGenerationError","name":"HtmlGenerationError","abstract":false,"superclass":{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/generator/message.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Generator/Html","kind":"class","full_name":"ChatGPT::Generator::Html","name":"Html"}},{"html_id":"chatgpt-cli/ChatGPT/Generator/Html/Message","path":"ChatGPT/Generator/Html/Message.html","kind":"class","full_name":"ChatGPT::Generator::Html::Message","name":"Message","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/generator/message.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L7"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Generator/Html","kind":"class","full_name":"ChatGPT::Generator::Html","name":"Html"},"constructors":[{"html_id":"new(message:Hash(String,String))-class-method","name":"new","abstract":false,"args":[{"name":"message","external_name":"message","restriction":"::Hash(::String, ::String)"}],"args_string":"(message : Hash(String, String))","args_html":"(message : Hash(String, String))","location":{"filename":"src/chatgpt/generator/message.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L10"},"def":{"name":"new","args":[{"name":"message","external_name":"message","restriction":"::Hash(::String, ::String)"}],"visibility":"Public","body":"_ = allocate\n_.initialize(message)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"avatar_class-instance-method","name":"avatar_class","abstract":false,"location":{"filename":"src/chatgpt/generator/message.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L21"},"def":{"name":"avatar_class","visibility":"Public","body":"case role\nwhen \"user\"\n  \"avatar human\"\nwhen \"system\"\n  \"avatar system\"\nwhen \"assistant\"\n  \"avatar gpt\"\nelse\n  raise(HtmlGenerationError.new(\"Unknown role: #{role}\"))\nend"}},{"html_id":"avatar_image-instance-method","name":"avatar_image","abstract":false,"location":{"filename":"src/chatgpt/generator/message.cr","line_number":45,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L45"},"def":{"name":"avatar_image","visibility":"Public","body":"raise(NotImplementedError)"}},{"html_id":"content-instance-method","name":"content","abstract":false,"location":{"filename":"src/chatgpt/generator/message.cr","line_number":17,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L17"},"def":{"name":"content","visibility":"Public","body":"HTML.escape(@message[\"content\"])"}},{"html_id":"direction-instance-method","name":"direction","abstract":false,"location":{"filename":"src/chatgpt/generator/message.cr","line_number":34,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L34"},"def":{"name":"direction","visibility":"Public","body":"case role\nwhen \"user\", \"system\"\n  \"from\"\nwhen \"assistant\"\n  \"to\"\nelse\n  raise(HtmlGenerationError.new(\"Unknown role: #{role}\"))\nend"}},{"html_id":"role-instance-method","name":"role","abstract":false,"location":{"filename":"src/chatgpt/generator/message.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/generator/message.cr#L13"},"def":{"name":"role","visibility":"Public","body":"@message[\"role\"]"}}]}]}]},{"html_id":"chatgpt-cli/ChatGPT/Magic","path":"ChatGPT/Magic.html","kind":"class","full_name":"ChatGPT::Magic","name":"Magic","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic.cr","line_number":26,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L26"},{"filename":"src/chatgpt/magic/base.cr","line_number":2,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L2"},{"filename":"src/chatgpt/magic/cd.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L4"},{"filename":"src/chatgpt/magic/clear.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/clear.cr#L4"},{"filename":"src/chatgpt/magic/config.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/config.cr#L4"},{"filename":"src/chatgpt/magic/debug.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/debug.cr#L4"},{"filename":"src/chatgpt/magic/edit.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/edit.cr#L4"},{"filename":"src/chatgpt/magic/help.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/help.cr#L4"},{"filename":"src/chatgpt/magic/history.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/history.cr#L4"},{"filename":"src/chatgpt/magic/html.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L4"},{"filename":"src/chatgpt/magic/load.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L4"},{"filename":"src/chatgpt/magic/model.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L4"},{"filename":"src/chatgpt/magic/response.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/response.cr#L4"},{"filename":"src/chatgpt/magic/resume.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/resume.cr#L4"},{"filename":"src/chatgpt/magic/save.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L4"},{"filename":"src/chatgpt/magic/shift.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L4"},{"filename":"src/chatgpt/magic/system.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L4"},{"filename":"src/chatgpt/magic/tokens.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/tokens.cr#L4"},{"filename":"src/chatgpt/magic/undo.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L4"},{"filename":"src/chatgpt/magic/webapp.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/webapp.cr#L4"},{"filename":"src/chatgpt/magic/write.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/write.cr#L4"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new(data=nil,key:String=\"%\")-class-method","name":"new","abstract":false,"args":[{"name":"data","default_value":"nil","external_name":"data","restriction":""},{"name":"key","default_value":"\"%\"","external_name":"key","restriction":"::String"}],"args_string":"(data = nil, key : String = \"%\")","args_html":"(data = <span class=\"n\">nil</span>, key : String = <span class=\"s\">&quot;%&quot;</span>)","location":{"filename":"src/chatgpt/magic.cr","line_number":34,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L34"},"def":{"name":"new","args":[{"name":"data","default_value":"nil","external_name":"data","restriction":""},{"name":"key","default_value":"\"%\"","external_name":"key","restriction":"::String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(data, key)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"commands:Array(ChatGPT::Magic::Base)-instance-method","name":"commands","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":31,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L31"},"def":{"name":"commands","return_type":"Array(ChatGPT::Magic::Base)","visibility":"Public","body":"@commands"}},{"html_id":"data:PostData-instance-method","name":"data","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":28,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L28"},"def":{"name":"data","return_type":"PostData","visibility":"Public","body":"@data"}},{"html_id":"data=(data:PostData)-instance-method","name":"data=","abstract":false,"args":[{"name":"data","external_name":"data","restriction":"PostData"}],"args_string":"(data : PostData)","args_html":"(data : <a href=\"../ChatGPT/PostData.html\">PostData</a>)","location":{"filename":"src/chatgpt/magic.cr","line_number":28,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L28"},"def":{"name":"data=","args":[{"name":"data","external_name":"data","restriction":"PostData"}],"visibility":"Public","body":"@data = data"}},{"html_id":"key:String-instance-method","name":"key","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":27,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L27"},"def":{"name":"key","return_type":"String","visibility":"Public","body":"@key"}},{"html_id":"response_data:ResponseData-instance-method","name":"response_data","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":29,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L29"},"def":{"name":"response_data","return_type":"ResponseData","visibility":"Public","body":"@response_data"}},{"html_id":"result:Bool-instance-method","name":"result","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":32,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L32"},"def":{"name":"result","return_type":"Bool","visibility":"Public","body":"@result"}},{"html_id":"run(command:String,data:ChatGPT::PostData,response_data:ChatGPT::ResponseData):Bool-instance-method","name":"run","abstract":false,"args":[{"name":"command","external_name":"command","restriction":"String"},{"name":"data","external_name":"data","restriction":"::ChatGPT::PostData"},{"name":"response_data","external_name":"response_data","restriction":"::ChatGPT::ResponseData"}],"args_string":"(command : String, data : ChatGPT::PostData, response_data : ChatGPT::ResponseData) : Bool","args_html":"(command : String, data : <a href=\"../ChatGPT/PostData.html\">ChatGPT::PostData</a>, response_data : <a href=\"../ChatGPT/ResponseData.html\">ChatGPT::ResponseData</a>) : Bool","location":{"filename":"src/chatgpt/magic.cr","line_number":57,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L57"},"def":{"name":"run","args":[{"name":"command","external_name":"command","restriction":"String"},{"name":"data","external_name":"data","restriction":"::ChatGPT::PostData"},{"name":"response_data","external_name":"response_data","restriction":"::ChatGPT::ResponseData"}],"return_type":"Bool","visibility":"Public","body":"@data = data\n@response_data = response_data\n@commands.each do |cmd|\n  if cmd.patterns.any? do |pat|\n    pat.match(command)\n  end\n    return cmd.try_run(command)\n  end\nend\nunknown_command_error(command)\n"}},{"html_id":"total_tokens:Int32-instance-method","name":"total_tokens","abstract":false,"location":{"filename":"src/chatgpt/magic.cr","line_number":30,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L30"},"def":{"name":"total_tokens","return_type":"Int32","visibility":"Public","body":"@total_tokens"}},{"html_id":"try_run(msg,data,response_data,total_tokens:Int32)-instance-method","name":"try_run","abstract":false,"args":[{"name":"msg","external_name":"msg","restriction":""},{"name":"data","external_name":"data","restriction":""},{"name":"response_data","external_name":"response_data","restriction":""},{"name":"total_tokens","external_name":"total_tokens","restriction":"::Int32"}],"args_string":"(msg, data, response_data, total_tokens : Int32)","args_html":"(msg, data, response_data, total_tokens : Int32)","location":{"filename":"src/chatgpt/magic.cr","line_number":45,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L45"},"def":{"name":"try_run","args":[{"name":"msg","external_name":"msg","restriction":""},{"name":"data","external_name":"data","restriction":""},{"name":"response_data","external_name":"response_data","restriction":""},{"name":"total_tokens","external_name":"total_tokens","restriction":"::Int32"}],"visibility":"Public","body":"@result = false\n@total_tokens = total_tokens\nif (/^%(?!\\{|#{key})/).match(msg)\n  cmd = msg[1..-1].strip\n  @result = run(cmd, data, response_data)\n  true\nelse\n  false\nend\n"}},{"html_id":"unknown_command_error(command)-instance-method","name":"unknown_command_error","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""}],"args_string":"(command)","args_html":"(command)","location":{"filename":"src/chatgpt/magic.cr","line_number":66,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic.cr#L66"},"def":{"name":"unknown_command_error","args":[{"name":"command","external_name":"command","restriction":""}],"visibility":"Public","body":"STDERR.puts(\"Error: Unknown magic command: #{command}\"._colorize(:warning, :bold))\nfalse\n"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","path":"ChatGPT/Magic/Base.html","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/base.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L3"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Cd","kind":"class","full_name":"ChatGPT::Magic::Cd","name":"Cd"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Clear","kind":"class","full_name":"ChatGPT::Magic::Clear","name":"Clear"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Config","kind":"class","full_name":"ChatGPT::Magic::Config","name":"Config"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Debug","kind":"class","full_name":"ChatGPT::Magic::Debug","name":"Debug"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Edit","kind":"class","full_name":"ChatGPT::Magic::Edit","name":"Edit"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Help","kind":"class","full_name":"ChatGPT::Magic::Help","name":"Help"},{"html_id":"chatgpt-cli/ChatGPT/Magic/History","kind":"class","full_name":"ChatGPT::Magic::History","name":"History"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Html","kind":"class","full_name":"ChatGPT::Magic::Html","name":"Html"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Load","kind":"class","full_name":"ChatGPT::Magic::Load","name":"Load"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Model","kind":"class","full_name":"ChatGPT::Magic::Model","name":"Model"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Response","kind":"class","full_name":"ChatGPT::Magic::Response","name":"Response"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Resume","kind":"class","full_name":"ChatGPT::Magic::Resume","name":"Resume"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Save","kind":"class","full_name":"ChatGPT::Magic::Save","name":"Save"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Shift","kind":"class","full_name":"ChatGPT::Magic::Shift","name":"Shift"},{"html_id":"chatgpt-cli/ChatGPT/Magic/System","kind":"class","full_name":"ChatGPT::Magic::System","name":"System"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Tokens","kind":"class","full_name":"ChatGPT::Magic::Tokens","name":"Tokens"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Undo","kind":"class","full_name":"ChatGPT::Magic::Undo","name":"Undo"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Webapp","kind":"class","full_name":"ChatGPT::Magic::Webapp","name":"Webapp"},{"html_id":"chatgpt-cli/ChatGPT/Magic/Write","kind":"class","full_name":"ChatGPT::Magic::Write","name":"Write"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender:Magic)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":"Magic"}],"args_string":"(sender : Magic)","args_html":"(sender : <a href=\"../../ChatGPT/Magic.html\">Magic</a>)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":14,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L14"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":"Magic"}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"data(*args,**options)-instance-method","name":"data","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L9"},"def":{"name":"data","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@sender.data(*args, **options)"}},{"html_id":"data(*args,**options,&)-instance-method","name":"data","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L9"},"def":{"name":"data","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@sender.data(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"data=(arg)-instance-method","name":"data=","abstract":false,"args":[{"name":"arg","external_name":"arg","restriction":""}],"args_string":"(arg)","args_html":"(arg)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L10"},"def":{"name":"data=","args":[{"name":"arg","external_name":"arg","restriction":""}],"visibility":"Public","body":"@sender.data = arg"}},{"html_id":"description:String-instance-method","name":"description","abstract":false,"location":{"filename":"src/chatgpt/magic/base.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L6"},"def":{"name":"description","return_type":"String","visibility":"Public","body":"@description"}},{"html_id":"name:String-instance-method","name":"name","abstract":false,"location":{"filename":"src/chatgpt/magic/base.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L5"},"def":{"name":"name","return_type":"String","visibility":"Public","body":"@name"}},{"html_id":"patterns:Array(Regex)-instance-method","name":"patterns","abstract":false,"location":{"filename":"src/chatgpt/magic/base.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L7"},"def":{"name":"patterns","return_type":"Array(Regex)","visibility":"Public","body":"@patterns"}},{"html_id":"response_data(*args,**options)-instance-method","name":"response_data","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options)","args_html":"(*args, **options)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L11"},"def":{"name":"response_data","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"visibility":"Public","body":"@sender.response_data(*args, **options)"}},{"html_id":"response_data(*args,**options,&)-instance-method","name":"response_data","abstract":false,"args":[{"name":"args","external_name":"args","restriction":""}],"args_string":"(*args, **options, &)","args_html":"(*args, **options, &)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L11"},"def":{"name":"response_data","args":[{"name":"args","external_name":"args","restriction":""}],"double_splat":{"name":"options","external_name":"options","restriction":""},"splat_index":0,"yields":1,"block_arity":1,"visibility":"Public","body":"@sender.response_data(*args, **options) do |*yield_args|\n  yield *yield_args\nend"}},{"html_id":"run(dummy)-instance-method","name":"run","abstract":false,"args":[{"name":"dummy","external_name":"dummy","restriction":""}],"args_string":"(dummy)","args_html":"(dummy)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":39,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L39"},"def":{"name":"run","args":[{"name":"dummy","external_name":"dummy","restriction":""}],"visibility":"Public","body":"raise(NotImplementedError.new(\"Do not call Magic::Base#run directly\"))\nfalse\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/base.cr","line_number":34,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L34"},"def":{"name":"run","visibility":"Public","body":"raise(NotImplementedError.new(\"Do not call Magic::Base#run directly\"))\nfalse\n"}},{"html_id":"sender:Magic-instance-method","name":"sender","abstract":false,"location":{"filename":"src/chatgpt/magic/base.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L4"},"def":{"name":"sender","return_type":"Magic","visibility":"Public","body":"@sender"}},{"html_id":"total_tokens=(arg)-instance-method","name":"total_tokens=","abstract":false,"args":[{"name":"arg","external_name":"arg","restriction":""}],"args_string":"(arg)","args_html":"(arg)","location":{"filename":"src/chatgpt/magic/base.cr","line_number":12,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L12"},"def":{"name":"total_tokens=","args":[{"name":"arg","external_name":"arg","restriction":""}],"visibility":"Public","body":"@sender.total_tokens = arg"}},{"html_id":"try_run(command):Bool-instance-method","name":"try_run","abstract":false,"args":[{"name":"command","external_name":"command","restriction":""}],"args_string":"(command) : Bool","args_html":"(command) : Bool","location":{"filename":"src/chatgpt/magic/base.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/base.cr#L21"},"def":{"name":"try_run","args":[{"name":"command","external_name":"command","restriction":""}],"return_type":"Bool","visibility":"Public","body":"patterns.each do |pattern|\n  if pattern =~ command\n    if $~[1]?\n      return run($~[1])\n    else\n      return run()\n    end\n  end\nend\nfalse\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Cd","path":"ChatGPT/Magic/Cd.html","kind":"class","full_name":"ChatGPT::Magic::Cd","name":"Cd","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/cd.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/cd.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(path)-instance-method","name":"run","abstract":false,"args":[{"name":"path","external_name":"path","restriction":""}],"args_string":"(path)","args_html":"(path)","location":{"filename":"src/chatgpt/magic/cd.cr","line_number":19,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L19"},"def":{"name":"run","args":[{"name":"path","external_name":"path","restriction":""}],"visibility":"Public","body":"begin\n  Dir.cd(path)\n  puts(\"#{Dir.current}\"._colorize(:warning))\nrescue e\n  puts(\"Invalid path\"._colorize(:warning))\nend\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/cd.cr","line_number":15,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/cd.cr#L15"},"def":{"name":"run","visibility":"Public","body":"run(@original_dir)"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Clear","path":"ChatGPT/Magic/Clear.html","kind":"class","full_name":"ChatGPT::Magic::Clear","name":"Clear","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/clear.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/clear.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/clear.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/clear.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/clear.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/clear.cr#L13"},"def":{"name":"run","visibility":"Public","body":"data.messages.clear\nputs(\"Cleared\"._colorize(:warning))\ntotal_tokens = -1\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Config","path":"ChatGPT/Magic/Config.html","kind":"class","full_name":"ChatGPT::Magic::Config","name":"Config","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/config.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/config.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/config.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/config.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/config.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/config.cr#L13"},"def":{"name":"run","visibility":"Public","body":"open_editor(ChatGPT::Config::CONFIG_FILE)\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Debug","path":"ChatGPT/Magic/Debug.html","kind":"class","full_name":"ChatGPT::Magic::Debug","name":"Debug","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/debug.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/debug.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/debug.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/debug.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/debug.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/debug.cr#L13"},"def":{"name":"run","visibility":"Public","body":"DEBUG_FLAG[0] = !DEBUG_FLAG[0]\nputs(\"Debug mode: #{DEBUG_FLAG[0]}\"._colorize(:warning))\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Edit","path":"ChatGPT/Magic/Edit.html","kind":"class","full_name":"ChatGPT::Magic::Edit","name":"Edit","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/edit.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/edit.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/edit.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/edit.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/edit.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/edit.cr#L13"},"def":{"name":"run","visibility":"Public","body":"new_data = data\n(File.tempfile(\"chatgpt-cli\", \".json\") do |file|\n  File.write(file.path, data.to_pretty_json)\n  open_editor(file.path)\n  begin\n    new_data = PostData.from_json(File.read(file.path))\n    puts(\"Saved\"._colorize(:warning))\n  rescue\n    puts(\"Error: Invalid JSON\"._colorize(:warning, :bold))\n  end\nend).delete\ndata = new_data\ntotal_tokens = -1\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Help","path":"ChatGPT/Magic/Help.html","kind":"class","full_name":"ChatGPT::Magic::Help","name":"Help","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/help.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/help.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/help.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/help.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/help.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/help.cr#L13"},"def":{"name":"run","visibility":"Public","body":"puts(\"Magic commands:\"._colorize(:warning, :bold))\nsender.commands.each do |command|\n  puts(\"  % #{command.name}\"._colorize(:warning, :bold))\n  puts(\"    #{command.description}\"._colorize(:warning))\nend\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/History","path":"ChatGPT/Magic/History.html","kind":"class","full_name":"ChatGPT::Magic::History","name":"History","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/history.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/history.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/history.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/history.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/history.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/history.cr#L13"},"def":{"name":"run","visibility":"Public","body":"open_editor(ChatGPT::Config::HISTORY_FILE)\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Html","path":"ChatGPT/Magic/Html.html","kind":"class","full_name":"ChatGPT::Magic::Html","name":"Html","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/html.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/html.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(file_name)-instance-method","name":"run","abstract":false,"args":[{"name":"file_name","external_name":"file_name","restriction":""}],"args_string":"(file_name)","args_html":"(file_name)","location":{"filename":"src/chatgpt/magic/html.cr","line_number":20,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L20"},"def":{"name":"run","args":[{"name":"file_name","external_name":"file_name","restriction":""}],"visibility":"Public","body":"html = (Generator::Html.new(data)).to_s\nFile.write(file_name, html)\nopen_browser(file_name)\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/html.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/html.cr#L13"},"def":{"name":"run","visibility":"Public","body":"html = (Generator::Html.new(data)).to_s\ntimestamp = Time.local.to_s(\"%Y%m%d-%H%M%S\")\nfile_name = \"chatgpt-#{timestamp}.html\"\nrun(file_name)\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Load","path":"ChatGPT/Magic/Load.html","kind":"class","full_name":"ChatGPT::Magic::Load","name":"Load","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/load.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/load.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(file_name)-instance-method","name":"run","abstract":false,"args":[{"name":"file_name","external_name":"file_name","restriction":""}],"args_string":"(file_name)","args_html":"(file_name)","location":{"filename":"src/chatgpt/magic/load.cr","line_number":23,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L23"},"def":{"name":"run","args":[{"name":"file_name","external_name":"file_name","restriction":""}],"visibility":"Public","body":"begin\n  new_data = PostData.from_json(File.read(file_name))\n  data = new_data\n  puts(\"Loaded from #{file_name}\"._colorize(:warning))\nrescue\n  puts(\"Error: Invalid JSON\"._colorize(:warning, :bold))\nend\ntotal_tokens = -1\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/load.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/load.cr#L13"},"def":{"name":"run","visibility":"Public","body":"file_names = Dir.glob(\"chatgpt-*.json\")\nif file_names.empty?\n  puts(\"Error: No saved data\"._colorize(:warning, :bold))\n  return true\nend\nrun(file_names.sort.last)\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Model","path":"ChatGPT/Magic/Model.html","kind":"class","full_name":"ChatGPT::Magic::Model","name":"Model","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/model.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/model.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(model_name)-instance-method","name":"run","abstract":false,"args":[{"name":"model_name","external_name":"model_name","restriction":""}],"args_string":"(model_name)","args_html":"(model_name)","location":{"filename":"src/chatgpt/magic/model.cr","line_number":18,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L18"},"def":{"name":"run","args":[{"name":"model_name","external_name":"model_name","restriction":""}],"visibility":"Public","body":"data.model = model_name\nputs(\"Set model to #{model_name}\"._colorize(:warning))\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/model.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/model.cr#L13"},"def":{"name":"run","visibility":"Public","body":"puts(\"Model: #{data.model}\"._colorize(:warning))\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Response","path":"ChatGPT/Magic/Response.html","kind":"class","full_name":"ChatGPT::Magic::Response","name":"Response","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/response.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/response.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/response.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/response.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/response.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/response.cr#L13"},"def":{"name":"run","visibility":"Public","body":"(File.tempfile(\"chatgpt-cli\", \".json\") do |file|\n  File.write(file.path, response_data.to_pretty_json)\n  open_editor(file.path)\nend).delete\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Resume","path":"ChatGPT/Magic/Resume.html","kind":"class","full_name":"ChatGPT::Magic::Resume","name":"Resume","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/resume.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/resume.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/resume.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/resume.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/resume.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/resume.cr#L13"},"def":{"name":"run","visibility":"Public","body":"if File.exists?(ChatGPT::Config::POST_DATA_FILE)\n  load_data_from_json(ChatGPT::Config::POST_DATA_FILE)\nelse\n  puts(\"No saved data\"._colorize(:warning))\nend\ntotal_tokens = -1\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Save","path":"ChatGPT/Magic/Save.html","kind":"class","full_name":"ChatGPT::Magic::Save","name":"Save","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/save.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/save.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(file_name)-instance-method","name":"run","abstract":false,"args":[{"name":"file_name","external_name":"file_name","restriction":""}],"args_string":"(file_name)","args_html":"(file_name)","location":{"filename":"src/chatgpt/magic/save.cr","line_number":20,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L20"},"def":{"name":"run","args":[{"name":"file_name","external_name":"file_name","restriction":""}],"visibility":"Public","body":"File.write(file_name, data.to_pretty_json)\nputs(\"Saved to #{file_name}\"._colorize(:warning))\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/save.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/save.cr#L13"},"def":{"name":"run","visibility":"Public","body":"timestamp = Time.local.to_s(\"%Y%m%d-%H%M%S\")\nfile_name = \"chatgpt-#{timestamp}.json\"\nrun(file_name)\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Shift","path":"ChatGPT/Magic/Shift.html","kind":"class","full_name":"ChatGPT::Magic::Shift","name":"Shift","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/shift.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/shift.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(n)-instance-method","name":"run","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n)","args_html":"(n)","location":{"filename":"src/chatgpt/magic/shift.cr","line_number":19,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L19"},"def":{"name":"run","args":[{"name":"n","external_name":"n","restriction":""}],"visibility":"Public","body":"number_of_user_messages = data.count_user_messages\nn = [n.to_i, number_of_user_messages].min\nn.times do\n  data.messages.shift\n  data.messages.shift\nend\nputs(\"Shift #{n} messages\"._colorize(:warning))\ntotal_tokens = -1\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/shift.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/shift.cr#L13"},"def":{"name":"run","visibility":"Public","body":"run(1)\ntotal_tokens = -1\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/System","path":"ChatGPT/Magic/System.html","kind":"class","full_name":"ChatGPT::Magic::System","name":"System","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/system.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/system.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(message)-instance-method","name":"run","abstract":false,"args":[{"name":"message","external_name":"message","restriction":""}],"args_string":"(message)","args_html":"(message)","location":{"filename":"src/chatgpt/magic/system.cr","line_number":22,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L22"},"def":{"name":"run","args":[{"name":"message","external_name":"message","restriction":""}],"visibility":"Public","body":"if data.messages.empty?\n  data.add_message(\"system\", message)\nelse\n  if data.messages[0][\"role\"] == \"system\"\n    data.messages[0][\"content\"] = message\n  else\n    data.messages.unshift({\"role\" => \"system\", \"content\" => message})\n  end\nend\nputs(\"Set system message to #{message}\"._colorize(:warning))\ntotal_tokens = -1\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/system.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/system.cr#L13"},"def":{"name":"run","visibility":"Public","body":"data.messages.each do |msg|\n  if msg[\"role\"] == \"system\"\n    puts(msg[\"content\"]._colorize(:warning))\n  end\nend\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Tokens","path":"ChatGPT/Magic/Tokens.html","kind":"class","full_name":"ChatGPT::Magic::Tokens","name":"Tokens","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/tokens.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/tokens.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/tokens.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/tokens.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/tokens.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/tokens.cr#L13"},"def":{"name":"run","visibility":"Public","body":"begin\n  tokens = response_data.tokens\nrescue ex\n  tokens = \"Unknown\"\nend\nputs(\"#{tokens}\"._colorize(:warning))\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Undo","path":"ChatGPT/Magic/Undo.html","kind":"class","full_name":"ChatGPT::Magic::Undo","name":"Undo","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/undo.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/undo.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(n)-instance-method","name":"run","abstract":false,"args":[{"name":"n","external_name":"n","restriction":""}],"args_string":"(n)","args_html":"(n)","location":{"filename":"src/chatgpt/magic/undo.cr","line_number":19,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L19"},"def":{"name":"run","args":[{"name":"n","external_name":"n","restriction":""}],"visibility":"Public","body":"number_of_user_messages = data.count_user_messages\nn = [n.to_i, number_of_user_messages].min\nn.times do\n  data.messages.pop\n  data.messages.pop\nend\nputs(\"Undo #{n == 1 ? \"last\" : n} messages\"._colorize(:warning))\ntotal_tokens = -1\ntrue\n"}},{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/undo.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/undo.cr#L13"},"def":{"name":"run","visibility":"Public","body":"run(1)\ntotal_tokens = -1\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Webapp","path":"ChatGPT/Magic/Webapp.html","kind":"class","full_name":"ChatGPT::Magic::Webapp","name":"Webapp","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/webapp.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/webapp.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/webapp.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/webapp.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run-instance-method","name":"run","abstract":false,"location":{"filename":"src/chatgpt/magic/webapp.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/webapp.cr#L13"},"def":{"name":"run","visibility":"Public","body":"open_browser(Client::WEB_APP_URL)\ntrue\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Magic/Write","path":"ChatGPT/Magic/Write.html","kind":"class","full_name":"ChatGPT::Magic::Write","name":"Write","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Magic/Base","kind":"class","full_name":"ChatGPT::Magic::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/magic/write.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/write.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Magic","kind":"class","full_name":"ChatGPT::Magic","name":"Magic"},"constructors":[{"html_id":"new(sender)-class-method","name":"new","abstract":false,"args":[{"name":"sender","external_name":"sender","restriction":""}],"args_string":"(sender)","args_html":"(sender)","location":{"filename":"src/chatgpt/magic/write.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/write.cr#L6"},"def":{"name":"new","args":[{"name":"sender","external_name":"sender","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(sender)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"run(file_name)-instance-method","name":"run","abstract":false,"args":[{"name":"file_name","external_name":"file_name","restriction":""}],"args_string":"(file_name)","args_html":"(file_name)","location":{"filename":"src/chatgpt/magic/write.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/magic/write.cr#L13"},"def":{"name":"run","args":[{"name":"file_name","external_name":"file_name","restriction":""}],"visibility":"Public","body":"last_response = (data.messages.dig?(-1, \"content\")).to_s\nFile.write(file_name, last_response)\nputs(\"Writed to #{file_name}\"._colorize(:warning))\ntrue\n"}}]}]},{"html_id":"chatgpt-cli/ChatGPT/PostData","path":"ChatGPT/PostData.html","kind":"struct","full_name":"ChatGPT::PostData","name":"PostData","abstract":false,"superclass":{"html_id":"chatgpt-cli/Struct","kind":"struct","full_name":"Struct","name":"Struct"},"ancestors":[{"html_id":"chatgpt-cli/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"},{"html_id":"chatgpt-cli/Struct","kind":"struct","full_name":"Struct","name":"Struct"},{"html_id":"chatgpt-cli/Value","kind":"struct","full_name":"Value","name":"Value"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/post_data.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L4"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"included_modules":[{"html_id":"chatgpt-cli/JSON/Serializable","kind":"module","full_name":"JSON::Serializable","name":"Serializable"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new(pull:JSON::PullParser)-class-method","name":"new","abstract":false,"args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"args_string":"(pull : JSON::PullParser)","args_html":"(pull : JSON::PullParser)","location":{"filename":"src/chatgpt/post_data.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L5"},"def":{"name":"new","args":[{"name":"pull","external_name":"pull","restriction":"::JSON::PullParser"}],"visibility":"Public","body":"new_from_json_pull_parser(pull)"}},{"html_id":"new(model:String=\"gpt-3.5-turbo\",messages:Array(Hash(String,String))=[]ofHash(String,String),n:Int32=1,temperature:Float64=1.0,top_p:Float64=1.0)-class-method","name":"new","abstract":false,"args":[{"name":"model","default_value":"\"gpt-3.5-turbo\"","external_name":"model","restriction":"::String"},{"name":"messages","default_value":"[] of Hash(String, String)","external_name":"messages","restriction":"::Array(::Hash(::String, ::String))"},{"name":"n","default_value":"1","external_name":"n","restriction":"::Int32"},{"name":"temperature","default_value":"1.0","external_name":"temperature","restriction":"::Float64"},{"name":"top_p","default_value":"1.0","external_name":"top_p","restriction":"::Float64"}],"args_string":"(model : String = \"gpt-3.5-turbo\", messages : Array(Hash(String, String)) = [] of Hash(String, String), n : Int32 = 1, temperature : Float64 = 1.0, top_p : Float64 = 1.0)","args_html":"(model : String = <span class=\"s\">&quot;gpt-3.5-turbo&quot;</span>, messages : Array(Hash(String, String)) = <span class=\"o\">[]</span> <span class=\"k\">of</span> <span class=\"t\">Hash</span>(<span class=\"t\">String</span>, <span class=\"t\">String</span>), n : Int32 = <span class=\"n\">1</span>, temperature : Float64 = <span class=\"n\">1.0</span>, top_p : Float64 = <span class=\"n\">1.0</span>)","location":{"filename":"src/chatgpt/post_data.cr","line_number":12,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L12"},"def":{"name":"new","args":[{"name":"model","default_value":"\"gpt-3.5-turbo\"","external_name":"model","restriction":"::String"},{"name":"messages","default_value":"[] of Hash(String, String)","external_name":"messages","restriction":"::Array(::Hash(::String, ::String))"},{"name":"n","default_value":"1","external_name":"n","restriction":"::Int32"},{"name":"temperature","default_value":"1.0","external_name":"temperature","restriction":"::Float64"},{"name":"top_p","default_value":"1.0","external_name":"top_p","restriction":"::Float64"}],"visibility":"Public","body":"_ = allocate\n_.initialize(model, messages, n, temperature, top_p)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"add_message(role:String,content:String)-instance-method","name":"add_message","abstract":false,"args":[{"name":"role","external_name":"role","restriction":"String"},{"name":"content","external_name":"content","restriction":"String"}],"args_string":"(role : String, content : String)","args_html":"(role : String, content : String)","location":{"filename":"src/chatgpt/post_data.cr","line_number":29,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L29"},"def":{"name":"add_message","args":[{"name":"role","external_name":"role","restriction":"String"},{"name":"content","external_name":"content","restriction":"String"}],"visibility":"Public","body":"@messages << {\"role\" => role, \"content\" => content}"}},{"html_id":"count_user_messages-instance-method","name":"count_user_messages","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L21"},"def":{"name":"count_user_messages","visibility":"Public","body":"user_messages.size"}},{"html_id":"messages:Array(Hash(String,String))-instance-method","name":"messages","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L7"},"def":{"name":"messages","return_type":"Array(Hash(String, String))","visibility":"Public","body":"@messages"}},{"html_id":"messages=(messages:Array(Hash(String,String)))-instance-method","name":"messages=","abstract":false,"args":[{"name":"messages","external_name":"messages","restriction":"Array(Hash(String, String))"}],"args_string":"(messages : Array(Hash(String, String)))","args_html":"(messages : Array(Hash(String, String)))","location":{"filename":"src/chatgpt/post_data.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L7"},"def":{"name":"messages=","args":[{"name":"messages","external_name":"messages","restriction":"Array(Hash(String, String))"}],"visibility":"Public","body":"@messages = messages"}},{"html_id":"model:String-instance-method","name":"model","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L6"},"def":{"name":"model","return_type":"String","visibility":"Public","body":"@model"}},{"html_id":"model=(model:String)-instance-method","name":"model=","abstract":false,"args":[{"name":"model","external_name":"model","restriction":"String"}],"args_string":"(model : String)","args_html":"(model : String)","location":{"filename":"src/chatgpt/post_data.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L6"},"def":{"name":"model=","args":[{"name":"model","external_name":"model","restriction":"String"}],"visibility":"Public","body":"@model = model"}},{"html_id":"n:Int32-instance-method","name":"n","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L10"},"def":{"name":"n","return_type":"Int32","visibility":"Public","body":"@n"}},{"html_id":"n=(n:Int32)-instance-method","name":"n=","abstract":false,"args":[{"name":"n","external_name":"n","restriction":"Int32"}],"args_string":"(n : Int32)","args_html":"(n : Int32)","location":{"filename":"src/chatgpt/post_data.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L10"},"def":{"name":"n=","args":[{"name":"n","external_name":"n","restriction":"Int32"}],"visibility":"Public","body":"@n = n"}},{"html_id":"temperature:Float64-instance-method","name":"temperature","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L8"},"def":{"name":"temperature","return_type":"Float64","visibility":"Public","body":"@temperature"}},{"html_id":"temperature=(temperature:Float64)-instance-method","name":"temperature=","abstract":false,"args":[{"name":"temperature","external_name":"temperature","restriction":"Float64"}],"args_string":"(temperature : Float64)","args_html":"(temperature : Float64)","location":{"filename":"src/chatgpt/post_data.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L8"},"def":{"name":"temperature=","args":[{"name":"temperature","external_name":"temperature","restriction":"Float64"}],"visibility":"Public","body":"@temperature = temperature"}},{"html_id":"top_p:Float64-instance-method","name":"top_p","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L9"},"def":{"name":"top_p","return_type":"Float64","visibility":"Public","body":"@top_p"}},{"html_id":"top_p=(top_p:Float64)-instance-method","name":"top_p=","abstract":false,"args":[{"name":"top_p","external_name":"top_p","restriction":"Float64"}],"args_string":"(top_p : Float64)","args_html":"(top_p : Float64)","location":{"filename":"src/chatgpt/post_data.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L9"},"def":{"name":"top_p=","args":[{"name":"top_p","external_name":"top_p","restriction":"Float64"}],"visibility":"Public","body":"@top_p = top_p"}},{"html_id":"user_messages-instance-method","name":"user_messages","abstract":false,"location":{"filename":"src/chatgpt/post_data.cr","line_number":25,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/post_data.cr#L25"},"def":{"name":"user_messages","visibility":"Public","body":"@messages.select do |msg|\n  msg[\"role\"] == \"user\"\nend"}}]},{"html_id":"chatgpt-cli/ChatGPT/ResponseData","path":"ChatGPT/ResponseData.html","kind":"class","full_name":"ChatGPT::ResponseData","name":"ResponseData","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/response_data.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L4"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new(data)-class-method","name":"new","abstract":false,"args":[{"name":"data","external_name":"data","restriction":""}],"args_string":"(data)","args_html":"(data)","location":{"filename":"src/chatgpt/response_data.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L5"},"def":{"name":"new","args":[{"name":"data","external_name":"data","restriction":""}],"visibility":"Public","body":"_ = allocate\n_.initialize(data)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"assistant_message-instance-method","name":"assistant_message","abstract":false,"location":{"filename":"src/chatgpt/response_data.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L21"},"def":{"name":"assistant_message","visibility":"Public","body":"(@data.dig(\"choices\", 0, \"message\", \"content\")).to_s"}},{"html_id":"to_pretty_json-instance-method","name":"to_pretty_json","abstract":false,"location":{"filename":"src/chatgpt/response_data.cr","line_number":17,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L17"},"def":{"name":"to_pretty_json","visibility":"Public","body":"@data.to_pretty_json"}},{"html_id":"tokens-instance-method","name":"tokens","abstract":false,"location":{"filename":"src/chatgpt/response_data.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L9"},"def":{"name":"tokens","visibility":"Public","body":"(@data.dig(\"usage\")).to_pretty_json"}},{"html_id":"total_tokens-instance-method","name":"total_tokens","abstract":false,"location":{"filename":"src/chatgpt/response_data.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/response_data.cr#L13"},"def":{"name":"total_tokens","visibility":"Public","body":"(@data.dig(\"usage\", \"total_tokens\")).to_s.to_i"}}]},{"html_id":"chatgpt-cli/ChatGPT/SigIntError","path":"ChatGPT/SigIntError.html","kind":"class","full_name":"ChatGPT::SigIntError","name":"SigIntError","abstract":false,"superclass":{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/client.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/client.cr#L7"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"}},{"html_id":"chatgpt-cli/ChatGPT/Substitutor","path":"ChatGPT/Substitutor.html","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor.cr","line_number":12,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor.cr#L12"},{"filename":"src/chatgpt/substitutor/base.cr","line_number":2,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/base.cr#L2"},{"filename":"src/chatgpt/substitutor/command.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/command.cr#L4"},{"filename":"src/chatgpt/substitutor/file.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file.cr#L5"},{"filename":"src/chatgpt/substitutor/file_extensions.cr","line_number":2,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file_extensions.cr#L2"},{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L4"},{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L4"},{"filename":"src/chatgpt/substitutor/url.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/url.cr#L5"},{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L11"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"constants":[{"id":"FILE_EXTENSIONS","name":"FILE_EXTENSIONS","value":"{\".c\" => \"c\", \".cr\" => \"crystal\", \".cpp\" => \"cpp\", \".cs\" => \"csharp\", \".css\" => \"css\", \".go\" => \"go\", \".html\" => \"html\", \".htm\" => \"html\", \".java\" => \"java\", \".js\" => \"javascript\", \".json\" => \"json\", \".kt\" => \"kotlin\", \".lua\" => \"lua\", \".md\" => \"md\", \".markdown\" => \"markdown\", \".m\" => \"matlab\", \".nim\" => \"nim\", \".pl\" => \"perl\", \".php\" => \"php\", \".py\" => \"python\", \".R\" => \"r\", \".rb\" => \"ruby\", \".rs\" => \"rust\", \".scala\" => \"scala\", \".sh\" => \"shell\", \".sql\" => \"sql\", \".swift\" => \"swift\", \".ts\" => \"typescript\", \".xml\" => \"xml\", \".yaml\" => \"yaml\", \".yml\" => \"yaml\"}"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new(system_command_runner:SystemCommand)-class-method","name":"new","abstract":false,"args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"args_string":"(system_command_runner : SystemCommand)","args_html":"(system_command_runner : <a href=\"../ChatGPT/SystemCommand.html\">SystemCommand</a>)","location":{"filename":"src/chatgpt/substitutor.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor.cr#L13"},"def":{"name":"new","args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"visibility":"Public","body":"_ = allocate\n_.initialize(system_command_runner)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor.cr","line_number":24,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor.cr#L24"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"@substitutors.each do |substitutor|\n  input_msg = substitutor.substitute(input_msg, config)\nend\ninput_msg\n"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","path":"ChatGPT/Substitutor/Base.html","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/base.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/base.cr#L3"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"subclasses":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Command","kind":"class","full_name":"ChatGPT::Substitutor::Command","name":"Command"},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/FilePath","kind":"class","full_name":"ChatGPT::Substitutor::FilePath","name":"FilePath"},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Stderr","kind":"class","full_name":"ChatGPT::Substitutor::Stderr","name":"Stderr"},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Stdout","kind":"class","full_name":"ChatGPT::Substitutor::Stdout","name":"Stdout"},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Url","kind":"class","full_name":"ChatGPT::Substitutor::Url","name":"Url"}],"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"instance_methods":[{"html_id":"substitute(text,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"text","external_name":"text","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(text, config)","args_html":"(text, config)","location":{"filename":"src/chatgpt/substitutor/base.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/base.cr#L4"},"def":{"name":"substitute","args":[{"name":"text","external_name":"text","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"raise(NotImplementedError.new(\"Do not use #{self.class} directly\"))\ntext\n"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Command","path":"ChatGPT/Substitutor/Command.html","kind":"class","full_name":"ChatGPT::Substitutor::Command","name":"Command","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/command.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/command.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"instance_methods":[{"html_id":"command(input_msg,command_pattern)-instance-method","name":"command","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"command_pattern","external_name":"command_pattern","restriction":""}],"args_string":"(input_msg, command_pattern)","args_html":"(input_msg, command_pattern)","location":{"filename":"src/chatgpt/substitutor/command.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/command.cr#L10"},"def":{"name":"command","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"command_pattern","external_name":"command_pattern","restriction":""}],"visibility":"Public","body":"input_msg.gsub(command_pattern) do |command_match|\n  command_pattern = $~[1].strip\n  command_output = `#{command_pattern}`\nend"}},{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor/command.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/command.cr#L6"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"command(input_msg, config.command_regex)"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/FilePath","path":"ChatGPT/Substitutor/FilePath.html","kind":"class","full_name":"ChatGPT::Substitutor::FilePath","name":"FilePath","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/file.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file.cr#L6"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"instance_methods":[{"html_id":"file(input_msg,file_pattern)-instance-method","name":"file","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"file_pattern","external_name":"file_pattern","restriction":""}],"args_string":"(input_msg, file_pattern)","args_html":"(input_msg, file_pattern)","location":{"filename":"src/chatgpt/substitutor/file.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file.cr#L11"},"def":{"name":"file","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"file_pattern","external_name":"file_pattern","restriction":""}],"visibility":"Public","body":"input_msg.gsub(file_pattern) do |file_match|\n  file_pattern = $~[1].strip\n  formatted_file_contents = get_formatted_file_contents(file_match, file_pattern)\n  if formatted_file_contents.is_a?(Array)\n    formatted_file_contents.join(\"\\n\")\n  else\n    formatted_file_contents\n  end\nend"}},{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor/file.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/file.cr#L7"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"file(input_msg, config.file_regex)"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Stderr","path":"ChatGPT/Substitutor/Stderr.html","kind":"class","full_name":"ChatGPT::Substitutor::Stderr","name":"Stderr","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"constructors":[{"html_id":"new(system_command_runner:SystemCommand)-class-method","name":"new","abstract":false,"args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"args_string":"(system_command_runner : SystemCommand)","args_html":"(system_command_runner : <a href=\"../../ChatGPT/SystemCommand.html\">SystemCommand</a>)","location":{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L6"},"def":{"name":"new","args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"visibility":"Public","body":"_ = allocate\n_.initialize(system_command_runner)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"stderr(input_msg,stderr_pattern)-instance-method","name":"stderr","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"stderr_pattern","external_name":"stderr_pattern","restriction":""}],"args_string":"(input_msg, stderr_pattern)","args_html":"(input_msg, stderr_pattern)","location":{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L13"},"def":{"name":"stderr","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"stderr_pattern","external_name":"stderr_pattern","restriction":""}],"visibility":"Public","body":"input_msg.gsub(stderr_pattern) do |stderr_match|\n  \"\\ncommand: `#{last_command}`\\n\\n```\\n#{last_stderr}\\n```\\n\"\nend"}},{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor/stderr.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stderr.cr#L9"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"stderr(input_msg, config.stderr_regex)"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Stdout","path":"ChatGPT/Substitutor/Stdout.html","kind":"class","full_name":"ChatGPT::Substitutor::Stdout","name":"Stdout","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L5"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"constructors":[{"html_id":"new(system_command_runner:SystemCommand)-class-method","name":"new","abstract":false,"args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"args_string":"(system_command_runner : SystemCommand)","args_html":"(system_command_runner : <a href=\"../../ChatGPT/SystemCommand.html\">SystemCommand</a>)","location":{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L6"},"def":{"name":"new","args":[{"name":"system_command_runner","external_name":"system_command_runner","restriction":"SystemCommand"}],"visibility":"Public","body":"_ = allocate\n_.initialize(system_command_runner)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"stdout(input_msg,stdout_pattern)-instance-method","name":"stdout","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"stdout_pattern","external_name":"stdout_pattern","restriction":""}],"args_string":"(input_msg, stdout_pattern)","args_html":"(input_msg, stdout_pattern)","location":{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L13"},"def":{"name":"stdout","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"stdout_pattern","external_name":"stdout_pattern","restriction":""}],"visibility":"Public","body":"input_msg.gsub(stdout_pattern) do |stdout_match|\n  \"\\n```\\n#{last_stdout}\\n```\\n\"\nend"}},{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor/stdout.cr","line_number":9,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/stdout.cr#L9"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"stdout(input_msg, config.stdout_regex)"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Url","path":"ChatGPT/Substitutor/Url.html","kind":"class","full_name":"ChatGPT::Substitutor::Url","name":"Url","abstract":false,"superclass":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},"ancestors":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/Base","kind":"class","full_name":"ChatGPT::Substitutor::Base","name":"Base"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/url.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/url.cr#L6"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"instance_methods":[{"html_id":"substitute(input_msg,config)-instance-method","name":"substitute","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"args_string":"(input_msg, config)","args_html":"(input_msg, config)","location":{"filename":"src/chatgpt/substitutor/url.cr","line_number":7,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/url.cr#L7"},"def":{"name":"substitute","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"config","external_name":"config","restriction":""}],"visibility":"Public","body":"url(input_msg, config.url_regex)"}},{"html_id":"url(input_msg,url_pattern)-instance-method","name":"url","abstract":false,"args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"url_pattern","external_name":"url_pattern","restriction":""}],"args_string":"(input_msg, url_pattern)","args_html":"(input_msg, url_pattern)","location":{"filename":"src/chatgpt/substitutor/url.cr","line_number":11,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/url.cr#L11"},"def":{"name":"url","args":[{"name":"input_msg","external_name":"input_msg","restriction":""},{"name":"url_pattern","external_name":"url_pattern","restriction":""}],"visibility":"Public","body":"input_msg.gsub(url_pattern) do |url_match|\n  url_pattern = $~[1].strip\n  fetch_and_compress_url_contents(url_match, url_pattern)\nend"}}]},{"html_id":"chatgpt-cli/ChatGPT/Substitutor/WebPageCompressor","path":"ChatGPT/Substitutor/WebPageCompressor.html","kind":"class","full_name":"ChatGPT::Substitutor::WebPageCompressor","name":"WebPageCompressor","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":12,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L12"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor","kind":"class","full_name":"ChatGPT::Substitutor","name":"Substitutor"},"constructors":[{"html_id":"new(url:String)-class-method","name":"new","abstract":false,"args":[{"name":"url","external_name":"url","restriction":"String"}],"args_string":"(url : String)","args_html":"(url : String)","location":{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":15,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L15"},"def":{"name":"new","args":[{"name":"url","external_name":"url","restriction":"String"}],"visibility":"Public","body":"_ = allocate\n_.initialize(url)\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"compress-instance-method","name":"compress","abstract":false,"location":{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":28,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L28"},"def":{"name":"compress","visibility":"Public","body":"(words(Lexbor::Parser.new(@body))).join(\"|\")"}},{"html_id":"fetch-instance-method","name":"fetch","abstract":false,"location":{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":21,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L21"},"def":{"name":"fetch","visibility":"Public","body":"client = HTTP::Client.new(@uri)\nres = client.get(\"/\")\nif res.success?\nelse\n  raise(FetchError.new)\nend\n@body = res.body.to_s\n"}},{"html_id":"words(parser)-instance-method","name":"words","abstract":false,"args":[{"name":"parser","external_name":"parser","restriction":""}],"args_string":"(parser)","args_html":"(parser)","location":{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":32,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L32"},"def":{"name":"words","args":[{"name":"parser","external_name":"parser","restriction":""}],"visibility":"Public","body":"(parser.nodes(:_text)).select() do |__arg0|\n  __arg0.parents.all?(&.displayble?)\nend.map(&.tag_text).reject(&.blank?).map() do |__arg4|\n  __arg4.strip.gsub(/\\s{2,}/, \" \")\nend"}}],"types":[{"html_id":"chatgpt-cli/ChatGPT/Substitutor/WebPageCompressor/FetchError","path":"ChatGPT/Substitutor/WebPageCompressor/FetchError.html","kind":"class","full_name":"ChatGPT::Substitutor::WebPageCompressor::FetchError","name":"FetchError","abstract":false,"superclass":{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},"ancestors":[{"html_id":"chatgpt-cli/Exception","kind":"class","full_name":"Exception","name":"Exception"},{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/substitutor/webpage_compressor.cr","line_number":13,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/substitutor/webpage_compressor.cr#L13"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT/Substitutor/WebPageCompressor","kind":"class","full_name":"ChatGPT::Substitutor::WebPageCompressor","name":"WebPageCompressor"}}]}]},{"html_id":"chatgpt-cli/ChatGPT/SystemCommand","path":"ChatGPT/SystemCommand.html","kind":"class","full_name":"ChatGPT::SystemCommand","name":"SystemCommand","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"src/chatgpt/system_command.cr","line_number":2,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L2"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/ChatGPT","kind":"module","full_name":"ChatGPT","name":"ChatGPT"},"constructors":[{"html_id":"new-class-method","name":"new","abstract":false,"location":{"filename":"src/chatgpt/system_command.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L8"},"def":{"name":"new","visibility":"Public","body":"_ = allocate\n_.initialize\nif _.responds_to?(:finalize)\n  ::GC.add_finalizer(_)\nend\n_\n"}}],"instance_methods":[{"html_id":"history:Array(String)-instance-method","name":"history","abstract":false,"location":{"filename":"src/chatgpt/system_command.cr","line_number":6,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L6"},"def":{"name":"history","visibility":"Public","body":"@history"}},{"html_id":"last_command:String-instance-method","name":"last_command","abstract":false,"location":{"filename":"src/chatgpt/system_command.cr","line_number":5,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L5"},"def":{"name":"last_command","visibility":"Public","body":"@last_command"}},{"html_id":"last_stderr:String-instance-method","name":"last_stderr","abstract":false,"location":{"filename":"src/chatgpt/system_command.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L4"},"def":{"name":"last_stderr","visibility":"Public","body":"@last_stderr"}},{"html_id":"last_stdout:String-instance-method","name":"last_stdout","abstract":false,"location":{"filename":"src/chatgpt/system_command.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L3"},"def":{"name":"last_stdout","visibility":"Public","body":"@last_stdout"}},{"html_id":"try_run(input_message)-instance-method","name":"try_run","abstract":false,"args":[{"name":"input_message","external_name":"input_message","restriction":""}],"args_string":"(input_message)","args_html":"(input_message)","location":{"filename":"src/chatgpt/system_command.cr","line_number":15,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/system_command.cr#L15"},"def":{"name":"try_run","args":[{"name":"input_message","external_name":"input_message","restriction":""}],"visibility":"Public","body":"if input_message.starts_with?(\"!\")\nelse\n  return false\nend\nif input_message.starts_with?(\"!!\")\n  run(input_message[2..-1].strip, record: true)\nelse\n  run(input_message[1..-1].strip, record: false)\nend\ntrue\n"}}]}]},{"html_id":"chatgpt-cli/HTTP","path":"HTTP.html","kind":"module","full_name":"HTTP","name":"HTTP","abstract":false,"locations":[{"filename":"lib/http_proxy/src/ext/http/client.cr","line_number":3,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/lib/http_proxy/src/ext/http/client.cr#L3"},{"filename":"lib/http_proxy/src/http/proxy/client.cr","line_number":10,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/lib/http_proxy/src/http/proxy/client.cr#L10"},{"filename":"lib/http_proxy/src/http_proxy.cr","line_number":8,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/lib/http_proxy/src/http_proxy.cr#L8"},{"filename":"src/chatgpt/utils/proxy.cr","line_number":29,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/utils/proxy.cr#L29"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"doc":"Monkey-patch `HTTP::Client` to make it respect the `*_PROXY`\n  environment variables","summary":"<p>Monkey-patch <code><a href=\"HTTP/Client.html\">HTTP::Client</a></code> to make it respect the <code>*_PROXY</code>   environment variables</p>","types":[{"html_id":"chatgpt-cli/HTTP/Client","path":"HTTP/Client.html","kind":"class","full_name":"HTTP::Client","name":"Client","abstract":false,"superclass":{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},"ancestors":[{"html_id":"chatgpt-cli/Reference","kind":"class","full_name":"Reference","name":"Reference"},{"html_id":"chatgpt-cli/Object","kind":"class","full_name":"Object","name":"Object"}],"locations":[{"filename":"lib/http_proxy/src/ext/http/client.cr","line_number":4,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/lib/http_proxy/src/ext/http/client.cr#L4"},{"filename":"src/chatgpt/utils/proxy.cr","line_number":30,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/utils/proxy.cr#L30"}],"repository_name":"chatgpt-cli","program":false,"enum":false,"alias":false,"const":false,"namespace":{"html_id":"chatgpt-cli/HTTP","kind":"module","full_name":"HTTP","name":"HTTP"},"doc":"An HTTP Client.\n\nNOTE: To use `Client`, you must explicitly import it with `require \"http/client\"`\n\n### One-shot usage\n\nWithout a block, an `HTTP::Client::Response` is returned and the response's body\nis available as a `String` by invoking `HTTP::Client::Response#body`.\n\n```\nrequire \"http/client\"\n\nresponse = HTTP::Client.get \"http://www.example.com\"\nresponse.status_code      # => 200\nresponse.body.lines.first # => \"<!doctype html>\"\n```\n\n### Parameters\n\nParameters can be added to any request with the `URI::Params.encode` method, which\nconverts a `Hash` or `NamedTuple` to a URL encoded HTTP query.\n\n```\nrequire \"http/client\"\n\nparams = URI::Params.encode({\"author\" => \"John Doe\", \"offset\" => \"20\"}) # => \"author=John+Doe&offset=20\"\nresponse = HTTP::Client.get URI.new(\"http\", \"www.example.com\", query: params)\nresponse.status_code # => 200\n```\n\n### Streaming\n\nWith a block, an `HTTP::Client::Response` body is returned and the response's body\nis available as an `IO` by invoking `HTTP::Client::Response#body_io`.\n\n```\nrequire \"http/client\"\n\nHTTP::Client.get(\"http://www.example.com\") do |response|\n  response.status_code  # => 200\n  response.body_io.gets # => \"<!doctype html>\"\nend\n```\n\n### Reusing a connection\n\nSimilar to the above cases, but creating an instance of an `HTTP::Client`.\n\n```\nrequire \"http/client\"\n\nclient = HTTP::Client.new \"www.example.com\"\nresponse = client.get \"/\"\nresponse.status_code      # => 200\nresponse.body.lines.first # => \"<!doctype html>\"\nclient.close\n```\n\nWARNING: A single `HTTP::Client` instance is not safe for concurrent use by multiple fibers.\n\n### Compression\n\nIf `compress` isn't set to `false`, and no `Accept-Encoding` header is explicitly specified,\nan HTTP::Client will add an `\"Accept-Encoding\": \"gzip, deflate\"` header, and automatically decompress\nthe response body/body_io.\n\n### Encoding\n\nIf a response has a `Content-Type` header with a charset, that charset is set as the encoding\nof the returned IO (or used for creating a String for the body). Invalid bytes in the given encoding\nare silently ignored when reading text content.","summary":"<p>An HTTP Client.</p>","constructors":[{"html_id":"new(uri:URI,tls:TLSContext=nil)-class-method","name":"new","doc":"Creates a new HTTP client from a URI. Parses the *host*, *port*,\nand *tls* configuration from the URI provided. Port defaults to\n80 if not specified unless using the https protocol, which defaults\nto port 443 and sets tls to `true`.\n\n```\nrequire \"http/client\"\nrequire \"uri\"\n\nuri = URI.parse(\"https://secure.example.com\")\nclient = HTTP::Client.new(uri)\n\nclient.tls? # => #<OpenSSL::SSL::Context::Client>\nclient.get(\"/\")\n```\nThis constructor will *ignore* any path or query segments in the URI\nas those will need to be passed to the client when a request is made.\n\nIf *tls* is given it will be used, if not a new TLS context will be created.\nIf *tls* is given and *uri* is a HTTP URI, `ArgumentError` is raised.\nIn any case the active context can be accessed through `tls`.\n\nThis constructor will raise an exception if any scheme but HTTP or HTTPS\nis used.","summary":"<p>Creates a new HTTP client from a URI.</p>","abstract":false,"args":[{"name":"uri","external_name":"uri","restriction":"URI"},{"name":"tls","default_value":"nil","external_name":"tls","restriction":"TLSContext"}],"args_string":"(uri : URI, tls : TLSContext = nil)","args_html":"(uri : URI, tls : TLSContext = <span class=\"n\">nil</span>)","location":{"filename":"src/chatgpt/utils/proxy.cr","line_number":31,"url":"https://github.com/kojix2/chatgpt-cli/blob/47dd39956877398d53a7823718d7a5c0e6ffcd0d/src/chatgpt/utils/proxy.cr#L31"},"def":{"name":"new","args":[{"name":"uri","external_name":"uri","restriction":"URI"},{"name":"tls","default_value":"nil","external_name":"tls","restriction":"TLSContext"}],"visibility":"Public","body":"client = previous_def(uri, tls)\nif proxy = get_proxy(uri)\n  client.proxy = proxy\nend\nclient\n"}}]}]}]}}